# å®šæ—¶æ‰¹é‡é€šçŸ¥é…ç½®åŠŸèƒ½éœ€æ±‚æ–‡æ¡£

**ç‰ˆæœ¬**: v1.0
**åˆ›å»ºæ—¥æœŸ**: 2026-02-07
**é¡¹ç›®**: DB-Doctor v3.2.0
**è´Ÿè´£äºº**: å¼€å‘å›¢é˜Ÿ

---

## ğŸ“‹ ç›®å½•

1. [éœ€æ±‚æ¦‚è¿°](#ä¸€éœ€æ±‚æ¦‚è¿°)
2. [åŠŸèƒ½è¯¦ç»†è¯´æ˜](#äºŒåŠŸèƒ½è¯¦ç»†è¯´æ˜)
3. [ç•Œé¢åŸå‹è®¾è®¡](#ä¸‰ç•Œé¢åŸå‹è®¾è®¡)
4. [APIæ¥å£è®¾è®¡](#å››apiæ¥å£è®¾è®¡)
5. [æ•°æ®åº“è®¾è®¡](#äº”æ•°æ®åº“è®¾è®¡)
6. [åç«¯å®ç°æ–¹æ¡ˆ](#å…­åç«¯å®ç°æ–¹æ¡ˆ)
7. [å‰ç«¯å®ç°æ–¹æ¡ˆ](#ä¸ƒå‰ç«¯å®ç°æ–¹æ¡ˆ)
8. [å¼€å‘ä»»åŠ¡æ¸…å•](#å…«å¼€å‘ä»»åŠ¡æ¸…å•)
9. [æµ‹è¯•éªŒæ”¶æ ‡å‡†](#ä¹æµ‹è¯•éªŒæ”¶æ ‡å‡†)

---

## ä¸€ã€éœ€æ±‚æ¦‚è¿°

### 1.1 èƒŒæ™¯

å½“å‰ DB-Doctor é¡¹ç›®çš„å®šæ—¶æ‰¹é‡é€šçŸ¥åŠŸèƒ½å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š
- âŒ `batch-cron` é…ç½®ç¡¬ç¼–ç åœ¨ `application.yml` ä¸­ï¼Œä¸æ”¯æŒçƒ­æ›´æ–°
- âŒ ä¿®æ”¹å®šæ—¶ä»»åŠ¡é…ç½®éœ€è¦é‡å¯åº”ç”¨
- âŒ æ— æ³•é€šè¿‡å‰ç«¯ç•Œé¢é…ç½®å®šæ—¶é€šçŸ¥è§„åˆ™

### 1.2 ç›®æ ‡

**é‡æ„ç›®æ ‡**ï¼šå®ç°å®šæ—¶æ‰¹é‡é€šçŸ¥çš„åŠ¨æ€é…ç½®ï¼Œæ”¯æŒå‰ç«¯é…ç½® + åç«¯çƒ­æ›´æ–°ã€‚

### 1.3 æ¶‰åŠçš„é…ç½®å‚æ•°

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `batch-cron` | String | `0 0 * * * ?` | Cron è¡¨è¾¾å¼ï¼Œæ§åˆ¶å®šæ—¶ä»»åŠ¡æ‰§è¡Œé¢‘ç‡ |
| `enabled-channels` | List | `[EMAIL, WEBHOOK]` | å¯ç”¨çš„é€šçŸ¥æ¸ é“ï¼ˆé‚®ä»¶ã€é’‰é’‰ã€ä¼ä¸šå¾®ä¿¡ã€é£ä¹¦ï¼‰ |

---

## äºŒã€åŠŸèƒ½è¯¦ç»†è¯´æ˜

### 2.1 å®šæ—¶ä»»åŠ¡é…ç½®

#### 2.1.1 Cron è¡¨è¾¾å¼é€‰æ‹©

**æ–¹å¼ 1ï¼šä¸‹æ‹‰é€‰æ‹©é¢„è®¾å€¼**ï¼ˆMVPé˜¶æ®µæ¨èï¼‰

| é€‰é¡¹ | Cron è¡¨è¾¾å¼ | è¯´æ˜ |
|------|------------|------|
| æ¯å°æ—¶ | `0 0 * * * ?` | æ¯å°æ—¶çš„ç¬¬ 0 åˆ†é’Ÿæ‰§è¡Œï¼ˆé»˜è®¤ï¼‰ |
| æ¯ 2 å°æ—¶ | `0 0 */2 * * ?` | æ¯ 2 å°æ—¶æ‰§è¡Œä¸€æ¬¡ |
| æ¯ 6 å°æ—¶ | `0 0 */6 * * ?` | æ¯ 6 å°æ—¶æ‰§è¡Œä¸€æ¬¡ |
| æ¯å¤© 9 ç‚¹ | `0 0 9 * * ?` | æ¯å¤©ä¸Šåˆ 9 ç‚¹æ‰§è¡Œ |
| æ¯å¤© 18 ç‚¹ | `0 0 18 * * ?` | æ¯å¤©ä¸‹åˆ 18 ç‚¹æ‰§è¡Œ |
| æ¯å¤© 9 å’Œ 18 ç‚¹ | `0 0 9,18 * * ?` | æ¯å¤© 9 ç‚¹å’Œ 18 ç‚¹å„æ‰§è¡Œä¸€æ¬¡ |
| æ¯å‘¨ä¸€ä¸Šåˆ 9 ç‚¹ | `0 0 9 * * MON` | æ¯å‘¨ä¸€ä¸Šåˆ 9 ç‚¹æ‰§è¡Œ |
| æ¯å‘¨ä¸€ä¸Šåˆ 9 ç‚¹ | `0 0 9 * * MON` | æ¯å‘¨ä¸€ä¸Šåˆ 9 ç‚¹æ‰§è¡Œ |

**æ–¹å¼ 2ï¼šè‡ªå®šä¹‰ Cron è¡¨è¾¾å¼**ï¼ˆå¯é€‰ï¼‰

å…è®¸é«˜çº§ç”¨æˆ·è¾“å…¥è‡ªå®šä¹‰ Cron è¡¨è¾¾å¼ï¼Œæ ¼å¼ï¼š
```
ç§’ åˆ† æ—¶ æ—¥ æœˆ å‘¨
0  0  *  *  ?
```

#### 2.1.2 å¯ç”¨çš„é€šçŸ¥æ¸ é“

æ”¯æŒå¤šé€‰ï¼š
- âœ… é‚®ä»¶ï¼ˆEMAILï¼‰
- âœ… é’‰é’‰ï¼ˆDINGTALKï¼‰
- âœ… ä¼ä¸šå¾®ä¿¡ï¼ˆWECOMï¼‰
- âœ… é£ä¹¦ï¼ˆFEISHUï¼‰

**é»˜è®¤è¡Œä¸º**ï¼šå…¨é€‰ï¼ˆæ‰€æœ‰å¯ç”¨çš„é€šçŸ¥æ¸ é“ï¼‰

### 2.2 å®šæ—¶ä»»åŠ¡æ‰§è¡Œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              å®šæ—¶æ‰¹é‡é€šçŸ¥æ‰§è¡Œæµç¨‹                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  1. å®šæ—¶ä»»åŠ¡è§¦å‘ï¼ˆæ ¹æ® batch-cron é…ç½®ï¼‰                     â”‚
â”‚      â†“                                                      â”‚
â”‚  2. æ£€æŸ¥å¯ç”¨çš„é€šçŸ¥æ¸ é“                                      â”‚
â”‚      â”œâ”€ å¦‚æœæ²¡æœ‰å¯ç”¨ä»»ä½•æ¸ é“ â†’ è·³è¿‡æœ¬æ¬¡é€šçŸ¥                 â”‚
â”‚      â””â”€ ç»§ç»­æ‰§è¡Œ â†’                                           â”‚
â”‚      â†“                                                      â”‚
â”‚  3. æŸ¥è¯¢ WAITING çŠ¶æ€çš„æ…¢æŸ¥è¯¢è®°å½•                            â”‚
â”‚      â””â”€ æ—¶é—´çª—å£ï¼šè¿‡å» 1 å°æ—¶ï¼ˆå¯é…ç½®ï¼‰                     â”‚
â”‚      â†“                                                      â”‚
â”‚  4. æ„å»ºæ‰¹æ¬¡æŠ¥å‘Š                                            â”‚
â”‚      â”œâ”€ æŒ‰ä¸¥é‡ç¨‹åº¦åˆ†ç»„ç»Ÿè®¡                                   â”‚
â”‚      â”œâ”€ æŒ‰å½±å“åŠ›æ’åºï¼ˆè€—æ—¶ Ã— æ¬¡æ•°ï¼‰                          â”‚
â”‚      â””â”€ æå– Top 3 é—®é¢˜è¡¨                                    â”‚
â”‚      â†“                                                      â”‚
â”‚  5. æ‰¹é‡å‘é€é€šçŸ¥                                           â”‚
â”‚      â”œâ”€ é‚®ä»¶é€šçŸ¥ï¼ˆå¦‚æœå¯ç”¨ï¼‰                                 â”‚
â”‚      â”œâ”€ é’‰é’‰é€šçŸ¥ï¼ˆå¦‚æœå¯ç”¨ï¼‰                                 â”‚
â”‚      â”œâ”€ ä¼ä¸šå¾®ä¿¡é€šçŸ¥ï¼ˆå¦‚æœå¯ç”¨ï¼‰                             â”‚
â”‚      â””â”€ é£ä¹¦é€šçŸ¥ï¼ˆå¦‚æœå¯ç”¨ï¼‰                                 â”‚
â”‚      â†“                                                      â”‚
â”‚  6. æ›´æ–°é€šçŸ¥çŠ¶æ€ä¸º SENT                                      â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸‰ã€ç•Œé¢åŸå‹è®¾è®¡

### 3.1 é€šçŸ¥è®¾ç½®é¡µé¢ï¼ˆè®¾ç½®ä¸­å¿ƒï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è®¾ç½®ä¸­å¿ƒ > å‘Šè­¦ä¸é€šçŸ¥ > é€šçŸ¥è®¾ç½®                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ å®šæ—¶æ‰¹é‡é€šçŸ¥é…ç½®                                        â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ æ‰§è¡Œæ—¶é—´ï¼ˆCron è¡¨è¾¾å¼ï¼‰                        [?]  â”‚   â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚   â”‚
â”‚ â”‚ â”‚ [â–¼ æ¯å°æ—¶ (0 0 * * * ?)]                  â”‚  é¢„è§ˆ:   â”‚   â”‚
â”‚ â”‚ â”‚  - æ¯ 2 å°æ—¶                                â”‚  æ¯å°æ—¶çš„   â”‚   â”‚
â”‚ â”‚ â”‚  - æ¯ 6 å°æ—¶                                â”‚  ç¬¬ 0 åˆ†é’Ÿ  â”‚   â”‚
â”‚ â”‚ â”‚  - æ¯å¤© 9 ç‚¹                                â”‚  æ‰§è¡Œä¸€æ¬¡   â”‚   â”‚
â”‚ â”‚ â”‚  - æ¯å¤© 18 ç‚¹                               â”‚            â”‚   â”‚
â”‚ â”‚ â”‚  - æ¯å¤© 9 å’Œ 18 ç‚¹                          â”‚            â”‚   â”‚
â”‚ â”‚ â”‚  - æ¯å‘¨ä¸€ä¸Šåˆ 9 ç‚¹                          â”‚            â”‚   â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ å¯ç”¨çš„é€šçŸ¥æ¸ é“                                      [?]  â”‚   â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚   â”‚
â”‚ â”‚ â”‚ â˜‘ é‚®ä»¶é€šçŸ¥                      â”‚  â€¢ å‘é€æ‰¹é‡  â”‚   â”‚
â”‚ â”‚ â”‚ â˜‘ é’‰é’‰é€šçŸ¥                      â”‚  é‚®ä»¶æ‘˜è¦  â”‚   â”‚
â”‚ â”‚ â”‚ â˜ ä¼ä¸šå¾®ä¿¡é€šçŸ¥                  â”‚            â”‚   â”‚
â”‚ â”‚ â”‚ â˜ é£ä¹¦é€šçŸ¥                      â”‚            â”‚   â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ [ä¿å­˜é…ç½®]  [ç«‹å³æ‰§è¡Œä¸€æ¬¡]  [æŸ¥çœ‹æ‰§è¡Œæ—¥å¿—]               â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ é€šçŸ¥æ¸ é“é…ç½®                                              â”‚   â”‚
â”‚ â”‚ ... (ç°æœ‰å†…å®¹ä¿æŒä¸å˜)                                  â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 æ§ä»¶è¯´æ˜

#### 3.2.1 æ‰§è¡Œæ—¶é—´é€‰æ‹©å™¨

**äº¤äº’æ–¹å¼**ï¼š
- ä¸‹æ‹‰é€‰æ‹©é¢„è®¾çš„ Cron è¡¨è¾¾å¼
- é€‰ä¸­åæ˜¾ç¤º"é¢„è§ˆ"æ–‡å­—è¯´æ˜
- ç¤ºä¾‹ï¼šé€‰ä¸­"æ¯ 2 å°æ—¶"ï¼Œæ˜¾ç¤º"æ¯ 2 å°æ—¶çš„ç¬¬ 0 åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡"

**æç¤ºæ–‡æœ¬**ï¼ˆé¼ æ ‡æ‚¬åœ `?` å›¾æ ‡ï¼‰ï¼š
```
å®šæ—¶æ‰¹é‡é€šçŸ¥çš„æ‰§è¡Œæ—¶é—´ï¼Œä½¿ç”¨ Cron è¡¨è¾¾å¼æ ¼å¼ã€‚
- æ¯å°æ—¶ï¼šæ¯å°æ—¶æ‰§è¡Œä¸€æ¬¡
- æ¯ 2 å°æ—¶ï¼šæ¯ 2 å°æ—¶æ‰§è¡Œä¸€æ¬¡
- æ¯å¤© 9 ç‚¹ï¼šæ¯å¤©ä¸Šåˆ 9 ç‚¹æ‰§è¡Œ
```

#### 3.2.2 å¯ç”¨çš„é€šçŸ¥æ¸ é“

**äº¤äº’æ–¹å¼**ï¼š
- å¤é€‰æ¡†å¤šé€‰
- é»˜è®¤å…¨é€‰ï¼ˆæ‰€æœ‰å·²é…ç½®çš„é€šçŸ¥æ¸ é“ï¼‰
- åªæ˜¾ç¤ºå·²é…ç½®é€šçŸ¥æ¸ é“çš„å¤é€‰æ¡†ï¼ˆæœªé…ç½®çš„ä¸æ˜¾ç¤ºï¼‰

**æç¤ºæ–‡æœ¬**ï¼ˆé¼ æ ‡æ‚¬åœ `?` å›¾æ ‡ï¼‰ï¼š
```
é€‰æ‹©å‚ä¸å®šæ—¶æ‰¹é‡é€šçŸ¥çš„é€šçŸ¥æ¸ é“ã€‚
åªæœ‰å·²é…ç½®ä¸”å¯ç”¨çš„é€šçŸ¥æ¸ é“æ‰ä¼šæ˜¾ç¤ºåœ¨æ­¤åˆ—è¡¨ä¸­ã€‚
```

#### 3.2.3 æ“ä½œæŒ‰é’®

| æŒ‰é’® | åŠŸèƒ½ | è¯´æ˜ |
|------|------|------|
| ä¿å­˜é…ç½® | ä¿å­˜åˆ°æ•°æ®åº“ï¼Œè§¦å‘çƒ­æ›´æ–° | ä¿å­˜åç«‹å³ç”Ÿæ•ˆï¼Œå®šæ—¶ä»»åŠ¡é‡æ–°è°ƒåº¦ |
| ç«‹å³æ‰§è¡Œä¸€æ¬¡ | æ‰‹åŠ¨è§¦å‘å®šæ—¶ä»»åŠ¡ | ç”¨äºæµ‹è¯•æˆ–ç´§æ€¥é€šçŸ¥ |
| æŸ¥çœ‹æ‰§è¡Œæ—¥å¿— | è·³è½¬åˆ°æ‰§è¡Œæ—¥å¿—é¡µé¢ | æŸ¥çœ‹å†å²æ‰§è¡Œè®°å½• |

---

## å››ã€APIæ¥å£è®¾è®¡

### 4.1 å®šæ—¶æ‰¹é‡é€šçŸ¥é…ç½® API

#### 4.1.1 æŸ¥è¯¢é…ç½®

```http
GET /api/notification-schedule/config
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": "SUCCESS",
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "batchCron": "0 0 * * * ?",
    "enabledChannels": ["EMAIL", "DINGTALK"],
    "nextExecutionTime": "2026-02-07T11:00:00",
    "lastExecutionTime": "2026-02-07T10:00:00"
  }
}
```

#### 4.1.2 æ›´æ–°é…ç½®

```http
POST /api/notification-schedule/config
Content-Type: application/json

{
  "batchCron": "0 0 */2 * * ?",
  "enabledChannels": ["EMAIL", "DINGTALK", "WECOM"]
}
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": "SUCCESS",
  "message": "é…ç½®å·²æ›´æ–°ï¼Œå®šæ—¶ä»»åŠ¡å·²é‡æ–°è°ƒåº¦",
  "data": {
    "nextExecutionTime": "2026-02-07T12:00:00"
  }
}
```

#### 4.1.3 ç«‹å³æ‰§è¡Œä¸€æ¬¡

```http
POST /api/notification-schedule/trigger
Content-Type: application/json

{
  "reason": "æ‰‹åŠ¨è§¦å‘"
}
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": "SUCCESS",
  "message": "å®šæ—¶ä»»åŠ¡å·²è§¦å‘",
  "data": {
    "executionId": "20260207-103000",
    "windowStart": "2026-02-07T10:00:00",
    "windowEnd": "2026-02-07T11:00:00",
    "waitingCount": 15
  }
}
```

### 4.2 æ‰§è¡Œæ—¥å¿— API

#### 4.2.1 æŸ¥è¯¢æ‰§è¡Œæ—¥å¿—

```http
GET /api/notification-schedule/logs?page=0&size=20
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": "SUCCESS",
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "total": 100,
    "page": 0,
    "size": 20,
    "list": [
      {
        "id": 1,
        "executionId": "20260207-100000",
        "triggerTime": "2026-02-07T10:00:00",
        "status": "SUCCESS",
        "windowStart": "2026-02-07T09:00:00",
        "windowEnd": "2026-02-07T10:00:00",
        "waitingCount": 15,
        "sentCount": 15,
        "failedChannels": [],
        "duration": 1234
      }
    ]
  }
}
```

---

## äº”ã€æ•°æ®åº“è®¾è®¡

### 5.1 system_config è¡¨å­˜å‚¨

| config_key | config_value | config_group | description |
|------------|-------------|--------------|-------------|
| `notification.batch-cron` | `0 0 * * * ?` | `notification` | å®šæ—¶æ‰¹é‡é€šçŸ¥ Cron è¡¨è¾¾å¼ |
| `notification.enabled-channels` | `EMAIL,DINGTALK` | `notification` | å¯ç”¨çš„é€šçŸ¥æ¸ é“ï¼ˆé€—å·åˆ†éš”ï¼‰ |

### 5.2 notification_schedule_log è¡¨ï¼ˆæ–°å¢ï¼‰

```sql
CREATE TABLE notification_schedule_log (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  execution_id VARCHAR(50) UNIQUE,
  trigger_time DATETIME,
  status VARCHAR(20),
  window_start DATETIME,
  window_end DATETIME,
  waiting_count INT,
  sent_count INT,
  failed_channels TEXT,
  duration_ms BIGINT,
  created_at DATETIME,
  INDEX idx_trigger_time (trigger_time),
  INDEX idx_status (status)
);
```

---

## å…­ã€åç«¯å®ç°æ–¹æ¡ˆ

### 6.1 åˆ›å»º DTO

#### 6.1.1 NotificationScheduleConfigDTO.java

```java
package com.dbdoctor.dto;

import jakarta.validation.constraints.NotBlank;
import jakarta.validation.constraints.Pattern;
import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;

import java.util.List;

/**
 * å®šæ—¶æ‰¹é‡é€šçŸ¥é…ç½® DTO
 */
@Data
@Builder
@NoArgsConstructor
@AllArgsConstructor
public class NotificationScheduleConfigDTO {

    /**
     * Cron è¡¨è¾¾å¼
     */
    @NotBlank(message = "Cron è¡¨è¾¾å¼ä¸èƒ½ä¸ºç©º")
    @Pattern(regexp = "^([0-9]|[*/-])+\\s+([0-9]|[*/-])+\\s+([0-9]|[*/-])+\\s+([0-9]|[*/-])+\\s+([0-9]|[*/-])+\\s+([0-9]|[*/-]+|[?])$",
             message = "Cron è¡¨è¾¾å¼æ ¼å¼ä¸æ­£ç¡®")
    private String batchCron;

    /**
     * å¯ç”¨çš„é€šçŸ¥æ¸ é“
     */
    private List<String> enabledChannels;

    /**
     * éªŒè¯æ¸ é“åˆ—è¡¨
     */
    public void validateChannels() {
        if (enabledChannels == null || enabledChannels.isEmpty()) {
            throw new IllegalArgumentException("è‡³å°‘å¯ç”¨ä¸€ä¸ªé€šçŸ¥æ¸ é“");
        }
    }
}
```

### 6.2 åˆ›å»º Service

#### 6.2.1 NotificationScheduleService.java

```java
package com.dbdoctor.service;

import com.dbdoctor.config.DbDoctorProperties;
import com.dbdoctor.dto.NotificationScheduleConfigDTO;
import com.dbdoctor.entity.SystemConfig;
import com.dbdoctor.repository.SystemConfigRepository;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.scheduling.concurrent.ThreadPoolTaskScheduler;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.time.LocalDateTime;
import java.time.format.DateTimeFormatter;
import java.util.*;
import java.util.concurrent.ScheduledFuture;

/**
 * å®šæ—¶æ‰¹é‡é€šçŸ¥é…ç½®æœåŠ¡
 */
@Slf4j
@Service
@requiredArgsConstructor
public class NotificationScheduleService {

    private final SystemConfigRepository configRepository;
    private final DbDoctorProperties properties;
    private final ThreadPoolTaskScheduler taskScheduler;

    // åŠ¨æ€å®šæ—¶ä»»åŠ¡å¥æŸ„
    private ScheduledFuture<?> scheduledTask;

    // é…ç½®é”®å¸¸é‡
    private static final String KEY_BATCH_CRON = "notification.batch-cron";
    private static final String KEY_ENABLED_CHANNELS = "notification.enabled-channels";

    // é»˜è®¤å€¼
    private static final String DEFAULT_BATCH_CRON = "0 0 * * * ?";
    private static final String DEFAULT_ENABLED_CHANNELS = "EMAIL,WEBHOOK";

    /**
     * æŸ¥è¯¢é…ç½®
     */
    public Map<String, Object> getConfig() {
        log.info("[å®šæ—¶é€šçŸ¥é…ç½®æœåŠ¡] æŸ¥è¯¢é…ç½®");

        String batchCron = getConfigValue(KEY_BATCH_CRON, DEFAULT_BATCH_CRON);
        String channelsStr = getConfigValue(KEY_ENABLED_CHANNELS, DEFAULT_ENABLED_CHANNELS);
        List<String> enabledChannels = Arrays.asList(channelsStr.split(","));

        return Map.of(
                "batchCron", batchCron,
                "enabledChannels", enabledChannels,
                "nextExecutionTime", getNextExecutionTime(batchCron),
                "lastExecutionTime", null // TODO: ä»æ—¥å¿—è¡¨æŸ¥è¯¢
        );
    }

    /**
     * æ›´æ–°é…ç½®
     */
    @Transactional
    public Map<String, Object> updateConfig(NotificationScheduleConfigDTO config) {
        log.info("[å®šæ—¶é€šçŸ¥é…ç½®æœåŠ¡] æ›´æ–°é…ç½®: {}", config);

        // éªŒè¯
        config.validateChannels();

        // ä¿å­˜åˆ°æ•°æ®åº“
        saveConfig(KEY_BATCH_CRON, config.getBatchCron());
        saveConfig(KEY_ENABLED_CHANNELS, String.join(",", config.getEnabledChannels()));

        // ğŸ”¥ çƒ­æ›´æ–°ï¼šé‡æ–°è°ƒåº¦å®šæ—¶ä»»åŠ¡
        rescheduleTask(config.getBatchCron());

        return Map.of(
                "code", "SUCCESS",
                "message", "é…ç½®å·²æ›´æ–°ï¼Œå®šæ—¶ä»»åŠ¡å·²é‡æ–°è°ƒåº¦",
                "data", Map.of(
                        "nextExecutionTime", getNextExecutionTime(config.getBatchCron())
                )
        );
    }

    /**
     * ç«‹å³æ‰§è¡Œä¸€æ¬¡
     */
    @Transactional
    public Map<String, Object> triggerNow(String reason) {
        log.info("[å®šæ—¶é€šçŸ¥é…ç½®æœåŠ¡] æ‰‹åŠ¨è§¦å‘: {}", reason);

        // TODO: è°ƒç”¨ NotificationScheduler.batchSendNotifications()

        return Map.of(
                "code", "SUCCESS",
                "message", "å®šæ—¶ä»»åŠ¡å·²è§¦å‘",
                "data", Map.of(
                        "executionId", UUID.randomUUID().toString(),
                        "triggerTime", LocalDateTime.now().toString()
                )
        );
    }

    /**
     * é‡æ–°è°ƒåº¦å®šæ—¶ä»»åŠ¡
     */
    private void rescheduleTask(String cronExpression) {
        log.info("[å®šæ—¶é€šçŸ¥é…ç½®æœåŠ¡] é‡æ–°è°ƒåº¦å®šæ—¶ä»»åŠ¡: cron={}", cronExpression);

        // å–æ¶ˆæ—§ä»»åŠ¡
        if (scheduledTask != null && !scheduledTask.isCancelled()) {
            scheduledTask.cancel(false);
            log.info("[å®šæ—¶é€šçŸ¥é…ç½®æœåŠ¡] å·²å–æ¶ˆæ—§çš„å®šæ—¶ä»»åŠ¡");
        }

        // è§£æ Cron è¡¨è¾¾å¼
        CronParser cronParser = new CronParser(cronExpression);

        // è°ƒåº¦æ–°ä»»åŠ¡
        scheduledTask = taskScheduler.scheduleAtFixedRate(
                () -> {
                    log.info("[åŠ¨æ€å®šæ—¶ä»»åŠ¡] æ‰§è¡Œå®šæ—¶æ‰¹é‡é€šçŸ¥");
                    // TODO: è°ƒç”¨ NotificationScheduler.batchSendNotifications()
                },
                cronParser.getNextExecutionTime().toInstant(),
                3600 // 1 å°æ—¶æ£€æŸ¥ä¸€æ¬¡ï¼ˆå®é™…æ‰§è¡Œæ—¶é—´ç”± Cron æ§åˆ¶ï¼‰
        );

        log.info("[å®šæ—¶é€šçŸ¥é…ç½®æœåŠ¡] æ–°å®šæ—¶ä»»åŠ¡å·²è°ƒåº¦ï¼Œä¸‹æ¬¡æ‰§è¡Œ: {}", cronParser.getNextExecutionTime());
    }

    /**
     * è·å–ä¸‹æ¬¡æ‰§è¡Œæ—¶é—´
     */
    private String getNextExecutionTime(String cronExpression) {
        try {
            CronParser parser = new CronParser(cronExpression);
            return parser.getNextExecutionTime().toString();
        } catch (Exception e) {
            log.warn("[å®šæ—¶é€šçŸ¥é…ç½®æœåŠ¡] è§£æ Cron è¡¨è¾¾å¼å¤±è´¥: {}", cronExpression, e);
            return null;
        }
    }

    /**
     * è·å–é…ç½®å€¼
     */
    private String getConfigValue(String key, String defaultValue) {
        return configRepository.findByConfigKey(key)
                .map(SystemConfig::getConfigValue)
                .orElse(defaultValue);
    }

    /**
     * ä¿å­˜é…ç½®
     */
    private void saveConfig(String key, String value) {
        SystemConfig config = configRepository.findByConfigKey(key)
                .orElse(new SystemConfig(key));

        config.setConfigValue(value);
        config.setConfigGroup("notification");
        config.setUpdatedBy("admin");
        config.setUpdatedAt(LocalDateTime.now());

        configRepository.save(config);
    }

    /**
     * Cron è¡¨è¾¾å¼è§£æå™¨ï¼ˆç®€åŒ–ç‰ˆï¼‰
     */
    private static class CronParser {
        private final String cronExpression;

        public CronParser(String cronExpression) {
            this.cronExpression = cronExpression;
        }

        public LocalDateTime getNextExecutionTime() {
            // TODO: å®ç°å®Œæ•´çš„ Cron è§£æé€»è¾‘
            // è¿™é‡Œä½¿ç”¨ç®€åŒ–å®ç°ï¼šä»…æ”¯æŒ "0 0 * * * ?" æ ¼å¼
            return LocalDateTime.now().plusHours(1).withMinute(0).withSecond(0);
        }
    }
}
```

### 6.3 åˆ›å»º Controller

#### 6.3.1 NotificationScheduleController.java

```java
package com.dbdoctor.controller;

import com.dbdoctor.dto.NotificationScheduleConfigDTO;
import com.dbdoctor.service.NotificationScheduleService;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.validation.annotation.Validated;
import org.springframework.web.bind.annotation.*;

import java.util.Map;

/**
 * å®šæ—¶æ‰¹é‡é€šçŸ¥é…ç½® API æ§åˆ¶å™¨
 */
@Slf4j
@RestController
@RequestMapping("/api/notification-schedule")
@RequiredArgsConstructor
public class NotificationScheduleController {

    private final NotificationScheduleService scheduleService;

    /**
     * æŸ¥è¯¢é…ç½®
     */
    @GetMapping("/config")
    public Map<String, Object> getConfig() {
        log.info("[å®šæ—¶é€šçŸ¥é…ç½®API] æŸ¥è¯¢é…ç½®");
        try {
            return Map.of(
                    "code", "SUCCESS",
                    "message", "æŸ¥è¯¢æˆåŠŸ",
                    "data", scheduleService.getConfig()
            );
        } catch (Exception e) {
            log.error("[å®šæ—¶é€šçŸ¥é…ç½®API] æŸ¥è¯¢å¤±è´¥", e);
            return Map.of(
                    "code", "ERROR",
                    "message", "æŸ¥è¯¢å¤±è´¥: " + e.getMessage()
            );
        }
    }

    /**
     * æ›´æ–°é…ç½®
     */
    @PostMapping("/config")
    public Map<String, Object> updateConfig(@Validated @RequestBody NotificationScheduleConfigDTO config) {
        log.info("[å®šæ—¶é€šçŸ¥é…ç½®API] æ›´æ–°é…ç½®: {}", config);
        try {
            return scheduleService.updateConfig(config);
        } catch (Exception e) {
            log.error("[å®šæ—¶é€šçŸ¥é…ç½®API] æ›´æ–°å¤±è´¥", e);
            return Map.of(
                    "code", "ERROR",
                    "message", "æ›´æ–°å¤±è´¥: " + e.getMessage()
            );
        }
    }

    /**
     * ç«‹å³æ‰§è¡Œä¸€æ¬¡
     */
    @PostMapping("/trigger")
    public Map<String, Object> triggerNow(@RequestBody Map<String, String> request) {
        log.info("[å®šæ—¶é€šçŸ¥é…ç½®API] æ‰‹åŠ¨è§¦å‘: {}", request);
        try {
            String reason = request.getOrDefault("reason", "æ‰‹åŠ¨è§¦å‘");
            return scheduleService.triggerNow(reason);
        } catch (Exception e) {
            log.error("[å®šæ—¶é€šçŸ¥é…ç½®API] è§¦å‘å¤±è´¥", e);
            return Map.of(
                    "code", "ERROR",
                    "message", "è§¦å‘å¤±è´¥: " + e.getMessage()
            );
        }
    }
}
```

---

## ä¸ƒã€å‰ç«¯å®ç°æ–¹æ¡ˆ

### 7.1 API å°è£…

#### 7.1.1 api/notificationSchedule.tsï¼ˆæ–°å¢ï¼‰

```typescript
/**
 * å®šæ—¶æ‰¹é‡é€šçŸ¥é…ç½® API
 */

import { request } from './index'

export const notificationScheduleApi = {
  /**
   * æŸ¥è¯¢é…ç½®
   */
  getConfig: () => {
    return request({
      url: '/notification-schedule/config',
      method: 'get'
    })
  },

  /**
   * æ›´æ–°é…ç½®
   */
  updateConfig: (data: {
    batchCron: string
    enabledChannels: string[]
  }) => {
    return request({
      url: '/notification-schedule/config',
      method: 'post',
      data
    })
  },

  /**
   * ç«‹å³æ‰§è¡Œä¸€æ¬¡
   */
  triggerNow: (data: {
    reason?: string
  }) => {
    return request({
      url: '/notification-schedule/trigger',
      method: 'post',
      data
    })
  },

  /**
   * æŸ¥è¯¢æ‰§è¡Œæ—¥å¿—
   */
  getLogs: (params: {
    page?: number
    size?: number
  }) => {
    return request({
      url: '/notification-schedule/logs',
      method: 'get',
      params
    })
  }
}
```

### 7.2 é¡µé¢ç»„ä»¶

#### 7.2.1 NotificationSettings.vue ä¸­æ·»åŠ å®šæ—¶é€šçŸ¥é…ç½®

åœ¨ç°æœ‰çš„é€šçŸ¥è®¾ç½®é¡µé¢ä¸­ï¼Œæ·»åŠ "å®šæ—¶æ‰¹é‡é€šçŸ¥é…ç½®"éƒ¨åˆ†ï¼š

```vue
<!-- å®šæ—¶æ‰¹é‡é€šçŸ¥é…ç½® -->
<div class="schedule-section">
  <div class="section-header">
    <h3>å®šæ—¶æ‰¹é‡é€šçŸ¥é…ç½®</h3>
  </div>

  <el-form :model="scheduleForm" label-width="180px">
    <!-- æ‰§è¡Œæ—¶é—´ -->
    <el-form-item>
      <template #label>
        <span>æ‰§è¡Œæ—¶é—´</span>
        <el-tooltip
          content="å®šæ—¶æ‰¹é‡é€šçŸ¥çš„æ‰§è¡Œæ—¶é—´ï¼Œä½¿ç”¨ Cron è¡¨è¾¾å¼æ ¼å¼"
          placement="top"
        >
          <el-icon class="tooltip-icon"><QuestionFilled /></el-icon>
        </el-tooltip>
      </template>
      <el-select v-model="scheduleForm.batchCron" @change="handleCronChange">
        <el-option label="æ¯å°æ—¶" value="0 0 * * * ?">
          <span>æ¯å°æ—¶</span>
          <span class="option-desc">æ¯å°æ—¶çš„ç¬¬ 0 åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡</span>
        </el-option>
        <el-option label="æ¯ 2 å°æ—¶" value="0 0 */2 * * ?">
          <span>æ¯ 2 å°æ—¶</span>
          <span class="option-desc">æ¯ 2 å°æ—¶æ‰§è¡Œä¸€æ¬¡</span>
        </el-option>
        <el-option label="æ¯ 6 å°æ—¶" value="0 0 */6 * * ?">
          <span>æ¯ 6 å°æ—¶</span>
          <span class="option-desc">æ¯ 6 å°æ—¶æ‰§è¡Œä¸€æ¬¡</span>
        </el-option>
        <el-option label="æ¯å¤© 9 ç‚¹" value="0 0 9 * * ?">
          <span>æ¯å¤© 9 ç‚¹</span>
          <span class="option-desc">æ¯å¤©ä¸Šåˆ 9 ç‚¹æ‰§è¡Œ</span>
        </el-option>
        <el-option label="æ¯å¤© 18 ç‚¹" value="0 0 18 * * ?">
          <span>æ¯å¤© 18 ç‚¹</span>
          <span class="option-desc">æ¯å¤©ä¸‹åˆ 18 ç‚¹æ‰§è¡Œ</span>
        </el-option>
        <el-option label="æ¯å¤© 9 å’Œ 18 ç‚¹" value="0 0 9,18 * * ?">
          <span>æ¯å¤© 9 å’Œ 18 ç‚¹</span>
          <span class="option-desc">æ¯å¤© 9 ç‚¹å’Œ 18 ç‚¹å„æ‰§è¡Œä¸€æ¬¡</span>
        </el-option>
        <el-option label="æ¯å‘¨ä¸€ä¸Šåˆ 9 ç‚¹" value="0 0 9 * * MON">
          <span>æ¯å‘¨ä¸€ä¸Šåˆ 9 ç‚¹</span>
          <span class="option-desc">æ¯å‘¨ä¸€ä¸Šåˆ 9 ç‚¹æ‰§è¡Œ</span>
        </el-option>
      </el-select>
      <span class="cron-preview">{{ cronPreview }}</span>
    </el-form-item>

    <!-- å¯ç”¨çš„é€šçŸ¥æ¸ é“ -->
    <el-form-item>
      <template #label>
        <span>å¯ç”¨çš„é€šçŸ¥æ¸ é“</span>
        <el-tooltip
          content="é€‰æ‹©å‚ä¸å®šæ—¶æ‰¹é‡é€šçŸ¥çš„é€šçŸ¥æ¸ é“ï¼Œåªæœ‰å·²é…ç½®ä¸”å¯ç”¨çš„é€šçŸ¥æ¸ é“æ‰ä¼šæ˜¾ç¤º"
          placement="top"
        >
          <el-icon class="tooltip-icon"><QuestionFilled /></el-icon>
        </el-tooltip>
      </template>
      <el-checkbox-group v-model="scheduleForm.enabledChannels">
        <el-checkbox label="é‚®ä»¶é€šçŸ¥" value="EMAIL" />
        <el-checkbox label="é’‰é’‰é€šçŸ¥" value="DINGTALK" />
        <el-checkbox label="ä¼ä¸šå¾®ä¿¡é€šçŸ¥" value="WECOM" />
        <el-checkbox label="é£ä¹¦é€šçŸ¥" value="FEISHU" />
      </el-checkbox-group>
    </el-form-item>

    <!-- æ“ä½œæŒ‰é’® -->
    <el-form-item>
      <el-button type="primary" @click="handleSaveSchedule">ä¿å­˜é…ç½®</el-button>
      <el-button @click="handleTriggerNow">ç«‹å³æ‰§è¡Œä¸€æ¬¡</el-button>
    </el-form-item>
  </el-form>
</div>
```

---

## å…«ã€å¼€å‘ä»»åŠ¡æ¸…å•

### 8.1 åç«¯ä»»åŠ¡

| åºå· | ä»»åŠ¡ | ä¼˜å…ˆçº§ | é¢„ä¼°æ—¶é—´ |
|------|------|--------|---------|
| 1 | åˆ›å»º `NotificationScheduleConfigDTO.java` | P0 | 0.5h |
| 2 | åˆ›å»º `NotificationScheduleService.java` | P0 | 2h |
| 3 | åˆ›å»º `NotificationScheduleController.java` | P0 | 1h |
| 4 | å®ç° Cron è§£æå™¨ | P1 | 1h |
| 5 | å®ç° ThreadPoolTaskScheduler åŠ¨æ€è°ƒåº¦ | P1 | 1.5h |
| 6 | åˆ›å»º `notification_schedule_log` è¡¨è¿ç§»è„šæœ¬ | P1 | 0.5h |
| 7 | åˆ›å»º `NotificationScheduleLog` å®ä½“ | P1 | 0.5h |
| 8 | å•å…ƒæµ‹è¯• | P1 | 2h |

**åç«¯æ€»è®¡**: 9 å°æ—¶

### 8.2 å‰ç«¯ä»»åŠ¡

| åºå· | ä»»åŠ¡ | ä¼˜å…ˆçº§ | é¢„ä¼°æ—¶é—´ |
|------|------|--------|---------|
| 1 | åˆ›å»º `api/notificationSchedule.ts` | P0 | 0.5h |
| 2 | åœ¨ `NotificationSettings.vue` ä¸­æ·»åŠ å®šæ—¶é€šçŸ¥é…ç½® UI | P0 | 2h |
| 3 | æ·»åŠ  Cron è¡¨è¾¾å¼é¢„è§ˆåŠŸèƒ½ | P1 | 0.5h |
| 4 | æ·»åŠ ä¿å­˜ã€è§¦å‘ç­‰æ“ä½œé€»è¾‘ | P0 | 1h |
| 5 | æ·»åŠ æ‰§è¡Œæ—¥å¿—é¡µé¢ï¼ˆå¯é€‰ï¼‰ | P2 | 1.5h |

**å‰ç«¯æ€»è®¡**: 5 å°æ—¶

---

## ä¹ã€æµ‹è¯•éªŒæ”¶æ ‡å‡†

### 9.1 åŠŸèƒ½æµ‹è¯•

- [ ] èƒ½å¤ŸæŸ¥è¯¢å½“å‰é…ç½®ï¼ˆCron è¡¨è¾¾å¼ã€å¯ç”¨çš„æ¸ é“ï¼‰
- [ ] èƒ½å¤Ÿä¿®æ”¹ Cron è¡¨è¾¾å¼ï¼ˆé€‰æ‹©é¢„è®¾å€¼ï¼‰
- [ ] èƒ½å¤Ÿä¿®æ”¹å¯ç”¨çš„é€šçŸ¥æ¸ é“ï¼ˆå¤šé€‰ï¼‰
- [ ] ä¿å­˜åç«‹å³ç”Ÿæ•ˆï¼ˆçƒ­æ›´æ–°ï¼‰
- [ ] "ç«‹å³æ‰§è¡Œä¸€æ¬¡"æŒ‰é’®èƒ½å¤Ÿè§¦å‘å®šæ—¶ä»»åŠ¡
- [ ] æ‰§è¡Œæ—¥å¿—æ­£ç¡®è®°å½•

### 9.2 è¾¹ç•Œæµ‹è¯•

- [ ] ä¸é€‰æ‹©ä»»ä½•é€šçŸ¥æ¸ é“æ—¶ä¿å­˜å¤±è´¥
- [ ] è¾“å…¥æ— æ•ˆçš„ Cron è¡¨è¾¾å¼æ—¶ä¿å­˜å¤±è´¥
- [ ] ä¿å­˜åä¸‹æ¬¡æ‰§è¡Œæ—¶é—´æ­£ç¡®è®¡ç®—

### 9.3 çƒ­æ›´æ–°æµ‹è¯•

- [ ] ä¿®æ”¹ Cron è¡¨è¾¾å¼åï¼Œå®šæ—¶ä»»åŠ¡æŒ‰ç…§æ–°æ—¶é—´æ‰§è¡Œ
- [ ] ä¿®æ”¹å¯ç”¨çš„é€šçŸ¥æ¸ é“åï¼Œæ‰¹é‡é€šçŸ¥åªå‘é€åˆ°å¯ç”¨çš„æ¸ é“
- [ ] æ— éœ€é‡å¯åº”ç”¨

---

## åã€é™„å½•

### 10.1 Cron è¡¨è¾¾å¼é€ŸæŸ¥è¡¨

```
æ ¼å¼: ç§’ åˆ† æ—¶ æ—¥ æœˆ å‘¨
     *  *  *  *  *

å­—æ®µå   å…è®¸å€¼            å…è®¸ç‰¹æ®Šå­—ç¬¦
ç§’       0-59             , - * /
åˆ†       0-59             , - * /
æ—¶       0-23             , - * /
æ—¥       1-31             , - * ? /
æœˆ       1-12             , - * /
å‘¨       0-6 æˆ– SUN-SAT  , - * ? /

ç¤ºä¾‹:
0 0 * * * ?     æ¯å°æ—¶
0 0 */2 * * ?   æ¯ 2 å°æ—¶
0 0 9 * * ?     æ¯å¤©ä¸Šåˆ 9 ç‚¹
0 0 0 * * *     æ¯å¤©åˆå¤œ
0 0 9,18 * * ?  æ¯å¤© 9 ç‚¹å’Œ 18 ç‚¹
0 0 9 * * MON   æ¯å‘¨ä¸€ä¸Šåˆ 9 ç‚¹
```

### 10.2 é€šçŸ¥æ¸ é“å¸¸é‡

```java
public enum NotificationChannel {
    EMAIL("é‚®ä»¶é€šçŸ¥", "EMAIL"),
    DINGTALK("é’‰é’‰é€šçŸ¥", "DINGTALK"),
    WECOM("ä¼ä¸šå¾®ä¿¡é€šçŸ¥", "WECOM"),
    FEISHU("é£ä¹¦é€šçŸ¥", "FEISHU");
}
```

---

**æ–‡æ¡£ç»“æŸ**
