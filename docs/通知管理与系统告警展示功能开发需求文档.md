# é€šçŸ¥ç®¡ç†ä¸ç›‘æ§æŒ‡æ ‡ä¼˜åŒ–åŠŸèƒ½å¼€å‘éœ€æ±‚æ–‡æ¡£

## æ–‡æ¡£ä¿¡æ¯

| é¡¹ç›® | å†…å®¹ |
|------|------|
| æ–‡æ¡£åç§° | é€šçŸ¥ç®¡ç†ä¸ç›‘æ§æŒ‡æ ‡ä¼˜åŒ–åŠŸèƒ½å¼€å‘éœ€æ±‚æ–‡æ¡£ |
| ç‰ˆæœ¬ | v2.0.0 |
| åˆ›å»ºæ—¶é—´ | 2026-02-08 |
| ä½œè€… | DB-Doctor å¼€å‘å›¢é˜Ÿ |
| çŠ¶æ€ | å¾…å®¡æ ¸ |

---

## ç›®å½•

1. [é¡¹ç›®èƒŒæ™¯](#1-é¡¹ç›®èƒŒæ™¯)
2. [åŠŸèƒ½æ¦‚è¿°](#2-åŠŸèƒ½æ¦‚è¿°)
3. [åŠŸèƒ½æ¨¡å—ä¸€ï¼šç›‘æ§ä¸­å¿ƒæŒ‡æ ‡ä¼˜åŒ–](#3-åŠŸèƒ½æ¨¡å—ä¸€ç›‘æ§ä¸­å¿ƒæŒ‡æ ‡ä¼˜åŒ–)
4. [åŠŸèƒ½æ¨¡å—äºŒï¼šæ…¢æŸ¥è¯¢é€šçŸ¥ç®¡ç†](#4-åŠŸèƒ½æ¨¡å—äºŒæ…¢æŸ¥è¯¢é€šçŸ¥ç®¡ç†)
5. [å¼€å‘è®¡åˆ’](#5-å¼€å‘è®¡åˆ’)
6. [éªŒæ”¶æ ‡å‡†](#6-éªŒæ”¶æ ‡å‡†)

---

## 1. é¡¹ç›®èƒŒæ™¯

### 1.1 ç°çŠ¶åˆ†æ

**ç›‘æ§ä¸­å¿ƒç°çŠ¶**ï¼ˆSystemHealth.vueï¼‰ï¼š
- âœ… å·²å®ç°ç³»ç»Ÿå¥åº·æŒ‡æ ‡å®æ—¶å±•ç¤º
- âœ… æ‰‹åŠ¨åˆ·æ–°æŒ‰é’®
- âœ… æ¯ 30 ç§’è‡ªåŠ¨åˆ·æ–°ï¼ˆå¯ç§»é™¤ï¼‰
- âŒ **ç¼ºå°‘ AI åˆ†æè€—æ—¶æŒ‡æ ‡**

**æ…¢æŸ¥è¯¢é€šçŸ¥ç°çŠ¶**ï¼š
- âœ… å·²å®ç°å®šæ—¶æ‰¹é‡é€šçŸ¥ï¼ˆæ¯å°æ—¶èšåˆå‘é€ï¼‰
- âœ… æœ‰ `NotificationScheduleLog` å®ä½“å’Œæ•°æ®åº“è¡¨
- âŒ **é€šçŸ¥æœªè½åº“**ï¼šæ— æ³•è¿½æº¯é€šçŸ¥å‘é€å†å²
- âŒ **æ²¡æœ‰é€šçŸ¥æ—¥å¿—è®°å½•**ï¼šæ— æ³•å®¡è®¡é€šçŸ¥æƒ…å†µ
- âŒ **æ²¡æœ‰ç®¡ç†ç•Œé¢**ï¼šæ— æ³•æŸ¥è¯¢é€šçŸ¥å†å²

### 1.2 ä¸šåŠ¡ç—›ç‚¹

1. **ç›‘æ§æŒ‡æ ‡ä¸å®Œæ•´**ï¼šç¼ºå°‘ AI åˆ†æè€—æ—¶å…³é”®æŒ‡æ ‡
2. **é€šçŸ¥è¿½æº¯å›°éš¾**ï¼šæ— æ³•æŸ¥çœ‹å†å²é€šçŸ¥è®°å½•
3. **é—®é¢˜æ’æŸ¥å›°éš¾**ï¼šé€šçŸ¥å‘é€å¤±è´¥æ—¶ï¼Œæ— æ³•æŸ¥çœ‹å¤±è´¥åŸå› 
4. **å®¡è®¡ç¼ºå¤±**ï¼šæ— æ³•å®¡è®¡é€šçŸ¥å‘é€æƒ…å†µ

### 1.3 ä¸šåŠ¡ä»·å€¼

1. **æå‡ç³»ç»Ÿé€æ˜åº¦**ï¼šå®Œæ•´çš„ç›‘æ§æŒ‡æ ‡å±•ç¤º
2. **æå‡è¿ç»´æ•ˆç‡**ï¼šé€šè¿‡é€šçŸ¥å†å²ç®¡ç†ï¼Œå¿«é€Ÿå®šä½é€šçŸ¥é—®é¢˜
3. **æ»¡è¶³å®¡è®¡è¦æ±‚**ï¼šå®Œæ•´çš„é€šçŸ¥æ—¥å¿—è®°å½•
4. **æå‡ç”¨æˆ·ä½“éªŒ**ï¼šè‡ªåŠ©æŸ¥è¯¢é€šçŸ¥å†å²

---

## 2. åŠŸèƒ½æ¦‚è¿°

### 2.1 åŠŸèƒ½èŒƒå›´

æœ¬æ¬¡å¼€å‘åŒ…å«ä¸¤å¤§åŠŸèƒ½æ¨¡å—ï¼š

| åŠŸèƒ½æ¨¡å— | ä¼˜å…ˆçº§ | å·¥ä½œé‡ | çŠ¶æ€ |
|---------|-------|--------|------|
| **ç›‘æ§ä¸­å¿ƒæŒ‡æ ‡ä¼˜åŒ–** | P1 | 0.5 å°æ—¶ | å¾…å¼€å‘ |
| **æ…¢æŸ¥è¯¢é€šçŸ¥ç®¡ç†** | P0 | 2-3 å¤© | å¾…å¼€å‘ |

### 2.2 å¼€å‘åŸåˆ™

1. **é…ç½®ä¼˜äºä»£ç **ï¼šæ‰€æœ‰å‚æ•°ä»é…ç½®æ–‡ä»¶è¯»å–ï¼Œç¦æ­¢ç¡¬ç¼–ç 
2. **æ—¥å¿—è§„èŒƒ**ï¼šä½¿ç”¨ Slf4jï¼Œç¦æ­¢ä½¿ç”¨ System.out.println
3. **é”™è¯¯å¤„ç†**ï¼šå…¨é¢å¤„ç†å¼‚å¸¸ï¼Œè®°å½•è¯¦ç»†é”™è¯¯ä¿¡æ¯
4. **ä»£ç è´¨é‡**ï¼šéµå¾ªé˜¿é‡Œå·´å·´ Java å¼€å‘è§„èŒƒ
5. **æµ‹è¯•è¦†ç›–**ï¼šå•å…ƒæµ‹è¯•è¦†ç›–ç‡ â‰¥ 80%

---

## 3. åŠŸèƒ½æ¨¡å—ä¸€ï¼šç›‘æ§ä¸­å¿ƒæŒ‡æ ‡ä¼˜åŒ–

### 3.1 åŠŸèƒ½æè¿°

åœ¨ç›‘æ§ä¸­å¿ƒé¡µé¢è¡¥å…… AI åˆ†æè€—æ—¶æŒ‡æ ‡ï¼Œå®Œå–„ä¸šåŠ¡ç›‘æ§æŒ‡æ ‡å±•ç¤ºã€‚

### 3.2 éœ€æ±‚è¯´æ˜

**ç°çŠ¶**ï¼š
- ç›‘æ§ä¸­å¿ƒå·²å±•ç¤ºï¼šæ…¢æŸ¥è¯¢ QPSã€é˜Ÿåˆ—ç§¯å‹
- ç¼ºå°‘ï¼šAI åˆ†æè€—æ—¶

**éœ€è¦è¡¥å……**ï¼š
- AI åˆ†æå¹³å‡è€—æ—¶ï¼ˆç§’ï¼‰
- å¯é€‰ï¼šAI åˆ†æ QPSï¼ˆæ¯ç§’åˆ†ææ¬¡æ•°ï¼‰

### 3.3 å®ç°æ–¹æ¡ˆ

#### 3.3.1 åç«¯ä¿®æ”¹

**æ–‡ä»¶**ï¼šæ— éœ€ä¿®æ”¹ï¼Œåç«¯å·²æœ‰æ•°æ®

**æ•°æ®æ¥æº**ï¼š`MetricsData.aiAnalysisDurationAvg`

**æ¥å£**ï¼š`GET /monitoring/metrics`ï¼ˆå·²å­˜åœ¨ï¼‰

**å“åº”æ ¼å¼**ï¼š
```json
{
  "code": "SUCCESS",
  "data": {
    "aiAnalysisMetrics": {
      "durationAvg": 2.5,
      "qps": 5.0
    }
  }
}
```

#### 3.3.2 å‰ç«¯ä¿®æ”¹

**æ–‡ä»¶**ï¼š`frontend/src/views/Monitoring/SystemHealth.vue`

**ä¿®æ”¹å†…å®¹**ï¼š

1. **ç§»é™¤è‡ªåŠ¨åˆ·æ–°**ï¼ˆç”¨æˆ·è¦æ±‚ï¼‰ï¼š
```typescript
// åˆ é™¤è¿™æ®µä»£ç 
// refreshTimer = window.setInterval(() => {
//   loadData()
// }, 30000)
```

2. **æ·»åŠ  AI åˆ†æè€—æ—¶å±•ç¤º**ï¼š
```vue
<!-- ä¸šåŠ¡æŒ‡æ ‡å¡ç‰‡ -->
<div class="card card-green">
  <div class="card-header">
    <div class="card-icon">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 256 256">
        <path d="M224,80a8,8,0,0,0-8,8v56.42l-42.26-53.79a8,8,0,0,0-12.42.92l-38,50.64L89.83,92.54a8,8,0,0,0-13.66-6.42L32,154.26V88a8,8,0,0,0-16,0v88a8,8,0,0,0,8,8H216a8,8,0,0,0,8-8V88A8,8,0,0,0,224,80ZM44,176l38.17-57.25L118.66,176Zm164,0H138.54l30.08-40.1L208,179.58Z"></path>
      </svg>
    </div>
    <h2 class="card-title">ä¸šåŠ¡æŒ‡æ ‡</h2>
  </div>
  <div class="card-content">
    <ul class="details-list">
      <li><span class="label">æ…¢æŸ¥è¯¢ QPS</span><span class="value">{{ metrics.slowQueryQps?.toFixed(2) || '0.00' }}</span></li>
      <li><span class="label">AI åˆ†æè€—æ—¶</span><span class="value">{{ metrics.aiAnalysisDuration?.toFixed(2) || '0.00' }}s</span></li>
      <li><span class="label">é˜Ÿåˆ—ç§¯å‹</span><span class="value">{{ metrics.queueBacklog || 0 }}</span></li>
    </ul>
  </div>
</div>
```

3. **ä¿®æ”¹æ•°æ®åŠ è½½é€»è¾‘**ï¼š
```typescript
// åŠ è½½æ•°æ®
const loadData = async () => {
  loading.value = true
  try {
    const [healthData, metricsData] = await Promise.all([
      systemHealthApi.getHealthStatus(),
      systemHealthApi.getMetrics()
    ])

    if (healthData) {
      systemInfo.value = healthData.systemInfo || {}
      healthIndicators.value = healthData.indicators || {}
    }

    if (metricsData) {
      metrics.value = {
        slowQueryQps: metricsData.slowQueryMetrics?.qps || 0,
        aiAnalysisDuration: metricsData.aiAnalysisMetrics?.durationAvg || 0,  // æ–°å¢
        cpuUsage: metricsData.systemResourceMetrics?.cpuUsage || 0,
        jvmMemoryUsage: metricsData.systemResourceMetrics?.memoryUsage || 0,
        queueBacklog: metricsData.queueBacklog || 0
      }
    }
  } catch (error: any) {
    console.error('åŠ è½½å¥åº·ç›‘æ§æ•°æ®å¤±è´¥:', error)
    ElMessage.error(error.message || 'åŠ è½½æ•°æ®å¤±è´¥')
  } finally {
    loading.value = false
  }
}

// å®šæ—¶åˆ·æ–°ï¼ˆç§»é™¤ï¼‰
onMounted(() => {
  loadData()
  // ç§»é™¤è‡ªåŠ¨åˆ·æ–°
  // refreshTimer = window.setInterval(() => {
  //   loadData()
  // }, 30000)
})
```

### 3.4 éªŒæ”¶æ ‡å‡†

- [ ] AI åˆ†æè€—æ—¶æŒ‡æ ‡æ­£å¸¸æ˜¾ç¤º
- [ ] æ•°æ®æ ¼å¼æ­£ç¡®ï¼ˆä¿ç•™ 2 ä½å°æ•°ï¼‰
- [ ] è‡ªåŠ¨åˆ·æ–°å·²ç§»é™¤
- [ ] æ‰‹åŠ¨åˆ·æ–°æŒ‰é’®æ­£å¸¸å·¥ä½œ

---

## 4. åŠŸèƒ½æ¨¡å—äºŒï¼šæ…¢æŸ¥è¯¢é€šçŸ¥ç®¡ç†

### 4.1 åŠŸèƒ½æè¿°

å®ç°æ…¢æŸ¥è¯¢æ‰¹é‡é€šçŸ¥çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ŒåŒ…æ‹¬é€šçŸ¥æ—¥å¿—è®°å½•ã€å†å²æŸ¥è¯¢ã€è¯¦æƒ…æŸ¥çœ‹ç­‰åŠŸèƒ½ã€‚

### 4.2 ç”¨æˆ·æ•…äº‹

> ä½œä¸º DBAï¼Œæˆ‘å¸Œæœ›èƒ½å¤ŸæŸ¥çœ‹æ…¢æŸ¥è¯¢é€šçŸ¥çš„å‘é€å†å²ï¼Œäº†è§£é€šçŸ¥å‘é€æƒ…å†µï¼ˆæ—¶é—´ã€æ•°é‡ã€æˆåŠŸ/å¤±è´¥ï¼‰ï¼Œæ–¹ä¾¿æ’æŸ¥é—®é¢˜å’Œå®¡è®¡ã€‚

### 4.3 æ ¸å¿ƒåŠŸèƒ½

#### 4.3.1 åŠŸèƒ½ç‚¹ 1ï¼šé€šçŸ¥è°ƒåº¦æ—¥å¿—è®°å½•

**ä¼˜å…ˆçº§**ï¼šP0ï¼ˆå¿…é¡»ï¼‰

**æè¿°**ï¼šåœ¨ `NotificationScheduler` æ‰§è¡Œæ‰¹é‡é€šçŸ¥æ—¶ï¼Œè‡ªåŠ¨è®°å½•è°ƒåº¦æ—¥å¿—åˆ°æ•°æ®åº“ã€‚

**æ•°æ®åº“è¡¨**ï¼š`notification_schedule_log`ï¼ˆå·²å­˜åœ¨ï¼‰

**å­—æ®µè¯´æ˜**ï¼š
| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|-------|------|------|
| id | BIGINT | ä¸»é”® |
| execution_id | VARCHAR(50) | æ‰§è¡ŒIDï¼ˆUUIDï¼‰ |
| trigger_time | DATETIME | è§¦å‘æ—¶é—´ |
| status | VARCHAR(20) | çŠ¶æ€ï¼šSUCCESS/FAILED |
| window_start | DATETIME | æ—¶é—´çª—å£å¼€å§‹ |
| window_end | DATETIME | æ—¶é—´çª—å£ç»“æŸ |
| waiting_count | INT | ç­‰å¾…é€šçŸ¥çš„è®°å½•æ•° |
| sent_count | INT | æˆåŠŸå‘é€çš„æ•°é‡ |
| failed_channels | TEXT | å¤±è´¥çš„æ¸ é“ï¼ˆJSONæ ¼å¼ï¼‰ |
| duration_ms | BIGINT | æ‰§è¡Œè€—æ—¶ï¼ˆæ¯«ç§’ï¼‰ |
| created_at | DATETIME | åˆ›å»ºæ—¶é—´ |

**ä¿®æ”¹æ–‡ä»¶**ï¼š
1. `src/main/java/com/dbdoctor/service/NotificationScheduleService.java`
2. `src/main/java/com/dbdoctor/service/NotificationScheduler.java`

**å®ç°é€»è¾‘**ï¼š
```java
@Scheduled(cron = "${db-doctor.notify.batch-cron:0 0 * * * ?}")
@Transactional
public void batchSendNotifications() {
    long startTime = System.currentTimeMillis();
    log.info("ğŸ“¬ å¼€å§‹æ‰§è¡Œå®šæ—¶æ‰¹é‡é€šçŸ¥ä»»åŠ¡");

    // åˆ›å»ºæ—¥å¿—è®°å½•
    NotificationScheduleLog scheduleLog = NotificationScheduleLog.builder()
        .triggerTime(LocalDateTime.now())
        .windowStart(windowStart)
        .windowEnd(windowEnd)
        .waitingCount(waitingTemplates.size())
        .build();

    try {
        // ... åŸæœ‰çš„é€šçŸ¥é€»è¾‘ ...

        // å‘é€æ‰¹é‡é€šçŸ¥
        boolean sendSuccess = notifyService.sendBatchNotification(report);

        // æ›´æ–°æ—¥å¿—
        scheduleLog.setSentCount(waitingTemplates.size());
        scheduleLog.setDurationMs(System.currentTimeMillis() - startTime);
        scheduleLog.setStatus(sendSuccess ? "SUCCESS" : "FAILED");

        if (!sendSuccess) {
            scheduleLog.setFailedChannels("[\"EMAIL\"]");
        }

        // ä¿å­˜æ—¥å¿—
        notificationScheduleLogRepository.save(scheduleLog);

        log.info("âœ… æ‰¹é‡é€šçŸ¥ä»»åŠ¡å®Œæˆ");
    } catch (Exception e) {
        long duration = System.currentTimeMillis() - startTime;
        log.error("âŒ æ‰¹é‡é€šçŸ¥ä»»åŠ¡æ‰§è¡Œå¤±è´¥ï¼Œè€—æ—¶={}ms", duration, e);

        // è®°å½•å¤±è´¥æ—¥å¿—
        scheduleLog.setStatus("FAILED");
        scheduleLog.setDurationMs(duration);
        scheduleLog.setSentCount(0);
        scheduleLog.setFailedChannels("[\"EMAIL\"]");
        notificationScheduleLogRepository.save(scheduleLog);
    }
}
```

#### 4.3.2 åŠŸèƒ½ç‚¹ 2ï¼šé€šçŸ¥å†å²æŸ¥è¯¢æ¥å£

**ä¼˜å…ˆçº§**ï¼šP0ï¼ˆå¿…é¡»ï¼‰

**æè¿°**ï¼šæä¾›åç«¯ REST APIï¼Œæ”¯æŒåˆ†é¡µæŸ¥è¯¢ã€ç­›é€‰ã€æ’åºã€‚

**æ¥å£å®šä¹‰**ï¼š
```
GET /api/notification-schedule/logs

æŸ¥è¯¢å‚æ•°ï¼š
- page: é¡µç ï¼ˆä»0å¼€å§‹ï¼‰ï¼Œé»˜è®¤ 0
- size: æ¯é¡µå¤§å°ï¼Œé»˜è®¤ 20
- status: çŠ¶æ€ç­›é€‰ï¼ˆSUCCESS/FAILEDï¼‰ï¼Œå¯é€‰
- startDate: å¼€å§‹æ—¥æœŸï¼ˆyyyy-MM-ddï¼‰ï¼Œå¯é€‰
- endDate: ç»“æŸæ—¥æœŸï¼ˆyyyy-MM-ddï¼‰ï¼Œå¯é€‰

å“åº”æ ¼å¼ï¼š
{
  "code": "SUCCESS",
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "total": 100,
    "page": 0,
    "size": 20,
    "list": [
      {
        "id": 1,
        "executionId": "uuid-xxx",
        "triggerTime": "2026-02-08 10:00:00",
        "status": "SUCCESS",
        "windowStart": "2026-02-08 09:00:00",
        "windowEnd": "2026-02-08 10:00:00",
        "waitingCount": 15,
        "sentCount": 15,
        "failedChannels": null,
        "durationMs": 1234
      }
    ]
  }
}
```

**æ–°å¢æ–‡ä»¶**ï¼š
1. `src/main/java/com/dbdoctor/repository/NotificationScheduleLogRepository.java`
2. `src/main/java/com/dbdoctor/service/NotificationScheduleLogService.java`
3. `src/main/java/com/dbdoctor/controller/NotificationScheduleLogController.java`
4. `src/main/java/com/dbdoctor/dto/NotificationScheduleLogDTO.java`

**Repository å®ç°**ï¼š
```java
package com.dbdoctor.repository;

import com.dbdoctor.entity.NotificationScheduleLog;
import org.springframework.data.domain.Page;
import org.springframework.data.domain.Pageable;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;
import org.springframework.stereotype.Repository;

import java.time.LocalDateTime;

/**
 * é€šçŸ¥è°ƒåº¦æ—¥å¿— Repository
 *
 * @author DB-Doctor
 * @version 1.0.0
 */
@Repository
public interface NotificationScheduleLogRepository extends JpaRepository<NotificationScheduleLog, Long> {

    /**
     * æ ¹æ®çŠ¶æ€æŸ¥è¯¢
     */
    Page<NotificationScheduleLog> findByStatus(String status, Pageable pageable);

    /**
     * æ ¹æ®æ—¶é—´èŒƒå›´æŸ¥è¯¢
     */
    Page<NotificationScheduleLog> findByTriggerTimeBetween(
        LocalDateTime startTime,
        LocalDateTime endTime,
        Pageable pageable
    );

    /**
     * æ ¹æ®çŠ¶æ€å’Œæ—¶é—´èŒƒå›´æŸ¥è¯¢
     */
    Page<NotificationScheduleLog> findByStatusAndTriggerTimeBetween(
        String status,
        LocalDateTime startTime,
        LocalDateTime endTime,
        Pageable pageable
    );

    /**
     * æŸ¥è¯¢æ‰€æœ‰æ—¥å¿—ï¼ˆåˆ†é¡µï¼‰
     */
    @Query("SELECT l FROM NotificationScheduleLog l ORDER BY l.triggerTime DESC")
    Page<NotificationScheduleLog> findAllOrderByTriggerTimeDesc(Pageable pageable);
}
```

**Service å®ç°**ï¼š
```java
package com.dbdoctor.service;

import com.dbdoctor.dto.NotificationScheduleLogDTO;
import com.dbdoctor.entity.NotificationScheduleLog;
import com.dbdoctor.repository.NotificationScheduleLogRepository;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.data.domain.Page;
import org.springframework.data.domain.PageRequest;
import org.springframework.data.domain.Pageable;
import org.springframework.data.domain.Sort;
import org.springframework.stereotype.Service;

import java.time.LocalDate;
import java.time.LocalDateTime;

/**
 * é€šçŸ¥è°ƒåº¦æ—¥å¿—æœåŠ¡
 *
 * @author DB-Doctor
 * @version 1.0.0
 */
@Slf4j
@Service
@RequiredArgsConstructor
public class NotificationScheduleLogService {

    private final NotificationScheduleLogRepository repository;

    /**
     * ä¿å­˜æ—¥å¿—
     */
    public NotificationScheduleLog save(NotificationScheduleLog log) {
        return repository.save(log);
    }

    /**
     * åˆ†é¡µæŸ¥è¯¢æ—¥å¿—
     */
    public Page<NotificationScheduleLogDTO> findLogs(
            Integer page,
            Integer size,
            String status,
            LocalDate startDate,
            LocalDate endDate) {

        Pageable pageable = PageRequest.of(page, size, Sort.by(Sort.Direction.DESC, "triggerTime"));
        Page<NotificationScheduleLog> logPage;

        if (status != null && !status.isEmpty()) {
            if (startDate != null && endDate != null) {
                logPage = repository.findByStatusAndTriggerTimeBetween(
                    status,
                    startDate.atStartOfDay(),
                    endDate.plusDays(1).atStartOfDay(),
                    pageable
                );
            } else {
                logPage = repository.findByStatus(status, pageable);
            }
        } else if (startDate != null && endDate != null) {
            logPage = repository.findByTriggerTimeBetween(
                startDate.atStartOfDay(),
                endDate.plusDays(1).atStartOfDay(),
                pageable
            );
        } else {
            logPage = repository.findAllOrderByTriggerTimeDesc(pageable);
        }

        return logPage.map(this::toDTO);
    }

    /**
     * æŸ¥è¯¢æ—¥å¿—è¯¦æƒ…
     */
    public NotificationScheduleLogDTO findById(Long id) {
        return repository.findById(id)
            .map(this::toDTO)
            .orElse(null);
    }

    /**
     * è½¬æ¢ä¸º DTO
     */
    private NotificationScheduleLogDTO toDTO(NotificationScheduleLog log) {
        return NotificationScheduleLogDTO.builder()
            .id(log.getId())
            .executionId(log.getExecutionId())
            .triggerTime(log.getTriggerTime())
            .status(log.getStatus())
            .windowStart(log.getWindowStart())
            .windowEnd(log.getWindowEnd())
            .waitingCount(log.getWaitingCount())
            .sentCount(log.getSentCount())
            .failedChannels(log.getFailedChannels())
            .durationMs(log.getDurationMs())
            .createdAt(log.getCreatedAt())
            .build();
    }
}
```

**Controller å®ç°**ï¼š
```java
package com.dbdoctor.controller;

import com.dbdoctor.dto.NotificationScheduleLogDTO;
import com.dbdoctor.service.NotificationScheduleLogService;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.data.domain.Page;
import org.springframework.web.bind.annotation.*;

import java.time.LocalDate;
import java.util.Map;

/**
 * é€šçŸ¥è°ƒåº¦æ—¥å¿—æ§åˆ¶å™¨
 *
 * @author DB-Doctor
 * @version 1.0.0
 */
@Slf4j
@RestController
@RequestMapping("/api/notification-schedule")
@RequiredArgsConstructor
public class NotificationScheduleLogController {

    private final NotificationScheduleLogService logService;

    /**
     * æŸ¥è¯¢é€šçŸ¥è°ƒåº¦æ—¥å¿—ï¼ˆåˆ†é¡µï¼‰
     *
     * GET /api/notification-schedule/logs?page=0&size=20&status=SUCCESS&startDate=2026-02-01&endDate=2026-02-08
     */
    @GetMapping("/logs")
    public Map<String, Object> getLogs(
        @RequestParam(defaultValue = "0") Integer page,
        @RequestParam(defaultValue = "20") Integer size,
        @RequestParam(required = false) String status,
        @RequestParam(required = false) LocalDate startDate,
        @RequestParam(required = false) LocalDate endDate
    ) {
        log.info("[é€šçŸ¥æ—¥å¿—] æŸ¥è¯¢é€šçŸ¥è°ƒåº¦æ—¥å¿—: page={}, size={}, status={}, startDate={}, endDate={}",
            page, size, status, startDate, endDate);

        try {
            Page<NotificationScheduleLogDTO> logPage = logService.findLogs(
                page, size, status, startDate, endDate
            );

            return Map.of(
                "code", "SUCCESS",
                "message", "æŸ¥è¯¢æˆåŠŸ",
                "data", Map.of(
                    "total", logPage.getTotalElements(),
                    "page", page,
                    "size", size,
                    "list", logPage.getContent()
                )
            );
        } catch (Exception e) {
            log.error("[é€šçŸ¥æ—¥å¿—] æŸ¥è¯¢å¤±è´¥", e);
            return Map.of(
                "code", "ERROR",
                "message", "æŸ¥è¯¢å¤±è´¥: " + e.getMessage()
            );
        }
    }

    /**
     * æŸ¥è¯¢æ—¥å¿—è¯¦æƒ…
     *
     * GET /api/notification-schedule/logs/{id}
     */
    @GetMapping("/logs/{id}")
    public Map<String, Object> getLogDetail(@PathVariable Long id) {
        log.info("[é€šçŸ¥æ—¥å¿—] æŸ¥è¯¢æ—¥å¿—è¯¦æƒ…: id={}", id);

        try {
            NotificationScheduleLogDTO log = logService.findById(id);

            if (log == null) {
                return Map.of(
                    "code", "ERROR",
                    "message", "æ—¥å¿—ä¸å­˜åœ¨"
                );
            }

            return Map.of(
                "code", "SUCCESS",
                "message", "æŸ¥è¯¢æˆåŠŸ",
                "data", log
            );
        } catch (Exception e) {
            log.error("[é€šçŸ¥æ—¥å¿—] æŸ¥è¯¢è¯¦æƒ…å¤±è´¥", e);
            return Map.of(
                "code", "ERROR",
                "message", "æŸ¥è¯¢å¤±è´¥: " + e.getMessage()
            );
        }
    }
}
```

**DTO å®ç°**ï¼š
```java
package com.dbdoctor.dto;

import lombok.Builder;
import lombok.Data;

import java.time.LocalDateTime;

/**
 * é€šçŸ¥è°ƒåº¦æ—¥å¿— DTO
 *
 * @author DB-Doctor
 * @version 1.0.0
 */
@Data
@Builder
public class NotificationScheduleLogDTO {
    private Long id;
    private String executionId;
    private LocalDateTime triggerTime;
    private String status;
    private LocalDateTime windowStart;
    private LocalDateTime windowEnd;
    private Integer waitingCount;
    private Integer sentCount;
    private String failedChannels;
    private Long durationMs;
    private LocalDateTime createdAt;
}
```

#### 4.3.3 åŠŸèƒ½ç‚¹ 3ï¼šé€šçŸ¥å†å²ç®¡ç†é¡µé¢

**ä¼˜å…ˆçº§**ï¼šP0ï¼ˆå¿…é¡»ï¼‰

**æè¿°**ï¼šå‰ç«¯é¡µé¢å±•ç¤ºé€šçŸ¥å†å²è®°å½•ï¼Œæ”¯æŒåˆ†é¡µã€ç­›é€‰ã€è¯¦æƒ…æŸ¥çœ‹ã€‚

**é¡µé¢è·¯å¾„**ï¼š`/monitoring/notification-history`

**è·¯ç”±é…ç½®**ï¼š
```javascript
{
  path: '/monitoring',
  component: () => import('@/views/Monitoring/index.vue'),
  children: [
    {
      path: 'notification-history',
      name: 'NotificationHistory',
      component: () => import('@/views/Monitoring/NotificationHistory.vue'),
      meta: { title: 'é€šçŸ¥å†å²', icon: 'Bell' }
    }
  ]
}
```

**æ–°å¢æ–‡ä»¶**ï¼š
1. `frontend/src/views/Monitoring/NotificationHistory.vue`
2. `frontend/src/api/notification.ts`

**é¡µé¢åŠŸèƒ½**ï¼š
1. **åˆ—è¡¨å±•ç¤º**ï¼š
   - è¡¨æ ¼å±•ç¤ºé€šçŸ¥å†å²è®°å½•
   - æ˜¾ç¤ºå­—æ®µï¼šè§¦å‘æ—¶é—´ã€æ—¶é—´çª—å£ã€çŠ¶æ€ã€ç­‰å¾…æ•°é‡ã€å‘é€æ•°é‡ã€è€—æ—¶
   - çŠ¶æ€æ ‡ç­¾ï¼šæˆåŠŸï¼ˆç»¿è‰²ï¼‰ã€å¤±è´¥ï¼ˆçº¢è‰²ï¼‰

2. **ç­›é€‰åŠŸèƒ½**ï¼š
   - çŠ¶æ€ç­›é€‰ï¼šå…¨éƒ¨/æˆåŠŸ/å¤±è´¥
   - æ—¥æœŸèŒƒå›´ç­›é€‰ï¼šå¼€å§‹æ—¥æœŸ ~ ç»“æŸæ—¥æœŸ
   - æœç´¢æŒ‰é’®ï¼šç‚¹å‡»ååˆ·æ–°åˆ—è¡¨

3. **åˆ†é¡µåŠŸèƒ½**ï¼š
   - æ¯é¡µæ˜¾ç¤º 20 æ¡è®°å½•
   - æ”¯æŒè·³é¡µ
   - æ˜¾ç¤ºæ€»è®°å½•æ•°

4. **è¯¦æƒ…æŸ¥çœ‹**ï¼š
   - ç‚¹å‡»"æŸ¥çœ‹è¯¦æƒ…"æŒ‰é’®
   - å¼¹çª—æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ï¼š
     - æ‰§è¡ŒID
     - æ—¶é—´çª—å£
     - ç»Ÿè®¡ä¿¡æ¯ï¼ˆç­‰å¾…æ•°é‡ã€å‘é€æ•°é‡ï¼‰
     - å¤±è´¥åŸå› ï¼ˆå¦‚æœæœ‰ï¼‰
     - æ‰§è¡Œè€—æ—¶

**å®Œæ•´é¡µé¢ä»£ç **ï¼š
```vue
<template>
  <div class="notification-history">
    <!-- é¡µé¢å¤´éƒ¨ -->
    <div class="page-header">
      <h1>é€šçŸ¥å†å²</h1>
      <el-button @click="refreshData" :loading="loading">
        <el-icon><Refresh /></el-icon> åˆ·æ–°
      </el-button>
    </div>

    <!-- ç­›é€‰å™¨ -->
    <el-form :inline="true" class="filter-form">
      <el-form-item label="çŠ¶æ€">
        <el-select v-model="filters.status" placeholder="å…¨éƒ¨" clearable style="width: 120px">
          <el-option label="æˆåŠŸ" value="SUCCESS" />
          <el-option label="å¤±è´¥" value="FAILED" />
        </el-select>
      </el-form-item>
      <el-form-item label="æ—¥æœŸèŒƒå›´">
        <el-date-picker
          v-model="dateRange"
          type="daterange"
          range-separator="è‡³"
          start-placeholder="å¼€å§‹æ—¥æœŸ"
          end-placeholder="ç»“æŸæ—¥æœŸ"
          value-format="YYYY-MM-DD"
          style="width: 280px"
        />
      </el-form-item>
      <el-form-item>
        <el-button type="primary" @click="handleQuery">æŸ¥è¯¢</el-button>
        <el-button @click="handleReset">é‡ç½®</el-button>
      </el-form-item>
    </el-form>

    <!-- æ•°æ®è¡¨æ ¼ -->
    <el-table :data="tableData" v-loading="loading" stripe>
      <el-table-column prop="triggerTime" label="è§¦å‘æ—¶é—´" width="180" />
      <el-table-column label="æ—¶é—´çª—å£" width="200">
        <template #default="{ row }">
          {{ formatTimeRange(row.windowStart, row.windowEnd) }}
        </template>
      </el-table-column>
      <el-table-column label="çŠ¶æ€" width="100">
        <template #default="{ row }">
          <el-tag :type="row.status === 'SUCCESS' ? 'success' : 'danger'">
            {{ row.status === 'SUCCESS' ? 'æˆåŠŸ' : 'å¤±è´¥' }}
          </el-tag>
        </template>
      </el-table-column>
      <el-table-column prop="waitingCount" label="ç­‰å¾…æ•°é‡" width="100" align="center" />
      <el-table-column prop="sentCount" label="å‘é€æ•°é‡" width="100" align="center" />
      <el-table-column label="è€—æ—¶" width="120" align="right">
        <template #default="{ row }">
          {{ (row.durationMs / 1000).toFixed(2) }}s
        </template>
      </el-table-column>
      <el-table-column label="æ“ä½œ" width="100" fixed="right" align="center">
        <template #default="{ row }">
          <el-button link type="primary" @click="handleViewDetail(row)">
            è¯¦æƒ…
          </el-button>
        </template>
      </el-table-column>
    </el-table>

    <!-- åˆ†é¡µ -->
    <div class="pagination-container">
      <el-pagination
        v-model:current-page="pagination.page"
        v-model:page-size="pagination.size"
        :total="pagination.total"
        @current-change="handlePageChange"
        layout="total, prev, pager, next, jumper"
      />
    </div>

    <!-- è¯¦æƒ…å¯¹è¯æ¡† -->
    <el-dialog v-model="detailVisible" title="é€šçŸ¥è¯¦æƒ…" width="600px">
      <el-descriptions :column="2" border>
        <el-descriptions-item label="æ‰§è¡ŒID">{{ detailData.executionId }}</el-descriptions-item>
        <el-descriptions-item label="çŠ¶æ€">
          <el-tag :type="detailData.status === 'SUCCESS' ? 'success' : 'danger'">
            {{ detailData.status === 'SUCCESS' ? 'æˆåŠŸ' : 'å¤±è´¥' }}
          </el-tag>
        </el-descriptions-item>
        <el-descriptions-item label="è§¦å‘æ—¶é—´">{{ formatDateTime(detailData.triggerTime) }}</el-descriptions-item>
        <el-descriptions-item label="è€—æ—¶">{{ (detailData.durationMs / 1000).toFixed(2) }}s</el-descriptions-item>
        <el-descriptions-item label="æ—¶é—´çª—å£" :span="2">
          {{ formatTimeRange(detailData.windowStart, detailData.windowEnd) }}
        </el-descriptions-item>
        <el-descriptions-item label="ç­‰å¾…æ•°é‡">{{ detailData.waitingCount }}</el-descriptions-item>
        <el-descriptions-item label="å‘é€æ•°é‡">{{ detailData.sentCount }}</el-descriptions-item>
        <el-descriptions-item v-if="detailData.failedChannels" label="å¤±è´¥æ¸ é“" :span="2">
          <el-tag type="danger">{{ detailData.failedChannels }}</el-tag>
        </el-descriptions-item>
      </el-descriptions>
    </el-dialog>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted } from 'vue'
import { Refresh } from '@element-plus/icons-vue'
import { ElMessage } from 'element-plus'
import { notificationScheduleLogApi } from '@/api/notification'

// å“åº”å¼æ•°æ®
const loading = ref(false)
const tableData = ref<any[]>([])
const detailVisible = ref(false)
const detailData = ref<any>({})

const filters = ref({
  status: ''
})

const dateRange = ref<[string, string] | null>(null)

const pagination = ref({
  page: 1,
  size: 20,
  total: 0
})

// æ ¼å¼åŒ–æ—¶é—´
const formatDateTime = (time: string) => {
  if (!time) return '-'
  return time.replace('T', ' ').substring(0, 19)
}

// æ ¼å¼åŒ–æ—¶é—´èŒƒå›´
const formatTimeRange = (start: string, end: string) => {
  if (!start || !end) return '-'
  const startDate = formatDateTime(start).substring(11, 16)
  const endDate = formatDateTime(end).substring(11, 16)
  return `${startDate} - ${endDate}`
}

// åŠ è½½æ•°æ®
const loadData = async () => {
  loading.value = true
  try {
    const res = await notificationScheduleLogApi.getLogs({
      page: pagination.value.page - 1,
      size: pagination.value.size,
      status: filters.value.status || undefined,
      startDate: dateRange.value?.[0],
      endDate: dateRange.value?.[1]
    })

    if (res.code === 'SUCCESS') {
      tableData.value = res.data.list
      pagination.value.total = res.data.total
    } else {
      ElMessage.error(res.message || 'åŠ è½½æ•°æ®å¤±è´¥')
    }
  } catch (error: any) {
    console.error('åŠ è½½é€šçŸ¥å†å²å¤±è´¥:', error)
    ElMessage.error(error.message || 'åŠ è½½æ•°æ®å¤±è´¥')
  } finally {
    loading.value = false
  }
}

// åˆ·æ–°æ•°æ®
const refreshData = () => {
  loadData()
}

// æŸ¥è¯¢
const handleQuery = () => {
  pagination.value.page = 1
  loadData()
}

// é‡ç½®
const handleReset = () => {
  filters.value.status = ''
  dateRange.value = null
  pagination.value.page = 1
  loadData()
}

// ç¿»é¡µ
const handlePageChange = (page: number) => {
  pagination.value.page = page
  loadData()
}

// æŸ¥çœ‹è¯¦æƒ…
const handleViewDetail = (row: any) => {
  detailData.value = row
  detailVisible.value = true
}

// åˆå§‹åŒ–
onMounted(() => {
  loadData()
})
</script>

<style scoped lang="scss">
.notification-history {
  padding: 20px;

  .page-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;

    h1 {
      font-size: 24px;
      font-weight: 600;
      margin: 0;
    }
  }

  .filter-form {
    background: #fff;
    padding: 16px;
    border-radius: 4px;
    margin-bottom: 16px;
  }

  .pagination-container {
    display: flex;
    justify-content: center;
    margin-top: 16px;
  }
}
</style>
```

**API æ–‡ä»¶**ï¼š
```typescript
// frontend/src/api/notification.ts
import { request } from './index'

/**
 * é€šçŸ¥è°ƒåº¦æ—¥å¿— API
 */
export const notificationScheduleLogApi = {
  /**
   * æŸ¥è¯¢é€šçŸ¥è°ƒåº¦æ—¥å¿—
   */
  getLogs: (params: {
    page?: number
    size?: number
    status?: string
    startDate?: string
    endDate?: string
  }) => {
    return request({
      url: '/notification-schedule/logs',
      method: 'get',
      params
    })
  },

  /**
   * æŸ¥è¯¢æ—¥å¿—è¯¦æƒ…
   */
  getLogDetail: (id: number) => {
    return request({
      url: `/notification-schedule/logs/${id}`,
      method: 'get'
    })
  }
}
```

---

## 5. å¼€å‘è®¡åˆ’

### 5.1 ä»»åŠ¡åˆ†è§£

| ä»»åŠ¡ | å·¥ä½œå†…å®¹ | æ–‡ä»¶ | é¢„è®¡æ—¶é—´ |
|------|---------|------|---------|
| **é˜¶æ®µ 1ï¼šç›‘æ§æŒ‡æ ‡ä¼˜åŒ–** | | | |
| 1.1 | ä¿®æ”¹ SystemHealth.vue | frontend/src/views/Monitoring/SystemHealth.vue | 0.5 å°æ—¶ |
| **é˜¶æ®µ 2ï¼šé€šçŸ¥æ—¥å¿—è®°å½•** | | | |
| 2.1 | åˆ›å»º Repository | NotificationScheduleLogRepository.java | 0.5 å°æ—¶ |
| 2.2 | åˆ›å»º DTO | NotificationScheduleLogDTO.java | 0.5 å°æ—¶ |
| 2.3 | åˆ›å»º Service | NotificationScheduleLogService.java | 1 å°æ—¶ |
| 2.4 | åˆ›å»º Controller | NotificationScheduleLogController.java | 1 å°æ—¶ |
| 2.5 | ä¿®æ”¹ NotificationScheduler | NotificationScheduler.java | 1 å°æ—¶ |
| 2.6 | ç¼–å†™å•å…ƒæµ‹è¯• | NotificationScheduleLogServiceTest.java | 1 å°æ—¶ |
| **é˜¶æ®µ 3ï¼šå‰ç«¯é¡µé¢** | | | |
| 3.1 | åˆ›å»º API æ–‡ä»¶ | frontend/src/api/notification.ts | 0.5 å°æ—¶ |
| 3.2 | åˆ›å»ºé€šçŸ¥å†å²é¡µé¢ | frontend/src/views/Monitoring/NotificationHistory.vue | 2 å°æ—¶ |
| 3.3 | é…ç½®è·¯ç”± | frontend/src/router/index.ts | 0.5 å°æ—¶ |
| **é˜¶æ®µ 4ï¼šæµ‹è¯•** | | | |
| 4.1 | å‰åç«¯è”è°ƒæµ‹è¯• | - | 1 å°æ—¶ |
| 4.2 | ä»£ç å®¡æŸ¥å’Œä¼˜åŒ– | - | 1 å°æ—¶ |
| **æ€»è®¡** | | | **11.5 å°æ—¶** |

### 5.2 å¼€å‘é¡ºåº

```
é˜¶æ®µ 1ï¼šç›‘æ§æŒ‡æ ‡ä¼˜åŒ–ï¼ˆ0.5 å°æ—¶ï¼‰
  â””â”€ ä¿®æ”¹ SystemHealth.vue

é˜¶æ®µ 2ï¼šåç«¯å¼€å‘ï¼ˆ5 å°æ—¶ï¼‰
  â”œâ”€ Repository â†’ DTO â†’ Service â†’ Controller
  â”œâ”€ ä¿®æ”¹ NotificationScheduler
  â””â”€ å•å…ƒæµ‹è¯•

é˜¶æ®µ 3ï¼šå‰ç«¯å¼€å‘ï¼ˆ3 å°æ—¶ï¼‰
  â”œâ”€ API æ–‡ä»¶ â†’ é¡µé¢å¼€å‘ â†’ è·¯ç”±é…ç½®
  â””â”€ æ ·å¼ä¼˜åŒ–

é˜¶æ®µ 4ï¼šæµ‹è¯•ï¼ˆ2 å°æ—¶ï¼‰
  â”œâ”€ å‰åç«¯è”è°ƒ
  â””â”€ ä»£ç å®¡æŸ¥
```

### 5.3 é‡Œç¨‹ç¢‘

| é‡Œç¨‹ç¢‘ | äº¤ä»˜ç‰© | å®Œæˆæ—¶é—´ |
|-------|-------|---------|
| M1 | ç›‘æ§æŒ‡æ ‡ä¼˜åŒ–å®Œæˆ | Day 1 (ä¸Šåˆ) |
| M2 | åç«¯æ¥å£å®Œæˆ | Day 2 (ä¸Šåˆ) |
| M3 | å‰ç«¯é¡µé¢å®Œæˆ | Day 2 (ä¸‹åˆ) |
| M4 | æµ‹è¯•å®Œæˆ | Day 3 (ä¸Šåˆ) |

---

## 6. éªŒæ”¶æ ‡å‡†

### 6.1 åŠŸèƒ½éªŒæ”¶

#### ç›‘æ§æŒ‡æ ‡ä¼˜åŒ–
- [ ] AI åˆ†æè€—æ—¶æŒ‡æ ‡æ­£å¸¸æ˜¾ç¤º
- [ ] è‡ªåŠ¨åˆ·æ–°å·²ç§»é™¤
- [ ] æ‰‹åŠ¨åˆ·æ–°æŒ‰é’®æ­£å¸¸å·¥ä½œ

#### é€šçŸ¥å†å²ç®¡ç†
- [ ] é€šçŸ¥è°ƒåº¦æ—¥å¿—è‡ªåŠ¨è®°å½•åˆ°æ•°æ®åº“
- [ ] é€šçŸ¥å†å²åˆ—è¡¨æ­£å¸¸å±•ç¤º
- [ ] åˆ†é¡µåŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] ç­›é€‰åŠŸèƒ½ï¼ˆçŠ¶æ€ã€æ—¥æœŸèŒƒå›´ï¼‰æ­£å¸¸å·¥ä½œ
- [ ] è¯¦æƒ…å¼¹çª—æ­£å¸¸å±•ç¤º

### 6.2 æ€§èƒ½éªŒæ”¶
- [ ] åˆ†é¡µæŸ¥è¯¢å“åº”æ—¶é—´ < 1 ç§’
- [ ] é¡µé¢é¦–å±åŠ è½½æ—¶é—´ < 2 ç§’
- [ ] æ•°æ®åº“æŸ¥è¯¢ä½¿ç”¨ç´¢å¼•ï¼ˆEXPLAIN éªŒè¯ï¼‰

### 6.3 ä»£ç è´¨é‡éªŒæ”¶
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–ç‡ â‰¥ 80%
- [ ] æ—  Checkstyle è­¦å‘Š
- [ ] ä»£ç ç¬¦åˆé˜¿é‡Œå·´å·´ Java å¼€å‘è§„èŒƒ
- [ ] å‰ç«¯ä»£ç ç¬¦åˆ ESLint è§„èŒƒ

---

## é™„å½•

### A. æ•°æ®åº“è¡¨ç»“æ„

**notification_schedule_log**
```sql
CREATE TABLE IF NOT EXISTS notification_schedule_log (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'ä¸»é”®',
    execution_id VARCHAR(50) NOT NULL UNIQUE COMMENT 'æ‰§è¡ŒIDï¼ˆUUIDï¼‰',
    trigger_time DATETIME NOT NULL COMMENT 'è§¦å‘æ—¶é—´',
    status VARCHAR(20) NOT NULL COMMENT 'çŠ¶æ€ï¼šSUCCESS/FAILED',
    window_start DATETIME COMMENT 'æ—¶é—´çª—å£å¼€å§‹',
    window_end DATETIME COMMENT 'æ—¶é—´çª—å£ç»“æŸ',
    waiting_count INT COMMENT 'ç­‰å¾…é€šçŸ¥çš„è®°å½•æ•°',
    sent_count INT COMMENT 'æˆåŠŸå‘é€çš„æ•°é‡',
    failed_channels TEXT COMMENT 'å¤±è´¥çš„æ¸ é“ï¼ˆJSONæ ¼å¼ï¼‰',
    duration_ms BIGINT COMMENT 'æ‰§è¡Œè€—æ—¶ï¼ˆæ¯«ç§’ï¼‰',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',

    INDEX idx_trigger_time (trigger_time),
    INDEX idx_status (status)
) COMMENT='å®šæ—¶æ‰¹é‡é€šçŸ¥æ‰§è¡Œæ—¥å¿—è¡¨';
```

### B. ç›¸å…³æ–‡æ¡£

- [SQLæ³¨é‡Šä¿ç•™é—®é¢˜åˆ†ææŠ¥å‘Š](./SQLæ³¨é‡Šä¿ç•™é—®é¢˜åˆ†ææŠ¥å‘Š.md)
- [é˜¿é‡Œå·´å·´ Java å¼€å‘æ‰‹å†Œ](https://github.com/alibaba/p3c)
- [Element Plus ç»„ä»¶åº“æ–‡æ¡£](https://element-plus.org/)

---

## å˜æ›´å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´å†…å®¹ |
|------|------|---------|
| v2.0.0 | 2026-02-08 | ç²¾ç®€éœ€æ±‚ï¼Œç§»é™¤ç³»ç»Ÿå‘Šè­¦å†å²ç®¡ç†ï¼Œèšç„¦é€šçŸ¥ç®¡ç†å’Œç›‘æ§æŒ‡æ ‡ä¼˜åŒ– |
| v1.0.0 | 2026-02-08 | åˆå§‹ç‰ˆæœ¬ |

---

**å®¡æ‰¹æµç¨‹**

- [ ] äº§å“ç»ç†å®¡æ ¸
- [ ] æŠ€æœ¯è´Ÿè´£äººå®¡æ ¸
- [ ] æµ‹è¯•è´Ÿè´£äººå®¡æ ¸
