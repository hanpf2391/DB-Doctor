# DB-Doctor å‰ç«¯ç®¡ç†ç³»ç»Ÿå¼€å‘æ–‡æ¡£ (TDD é©±åŠ¨)

**ç‰ˆæœ¬**: v2.2.0
**å¼€å‘æ¨¡å¼**: æµ‹è¯•é©±åŠ¨å¼€å‘ (TDD)
**æŠ€æœ¯æ ˆ**: Vue 3 + Element Plus + Spring Boot + H2
**å¼€å‘å‘¨æœŸ**: é¢„è®¡ 5-7 å¤©

---

## ğŸ“‹ ç›®å½•

1. [éœ€æ±‚æ¦‚è¿°](#éœ€æ±‚æ¦‚è¿°)
2. [æ ¸å¿ƒè®¾è®¡ç†å¿µ](#æ ¸å¿ƒè®¾è®¡ç†å¿µ)
3. [åŠŸèƒ½æ¨¡å—è¯¦ç»†è®¾è®¡](#åŠŸèƒ½æ¨¡å—è¯¦ç»†è®¾è®¡)
4. [æ•°æ®åº“è®¾è®¡](#æ•°æ®åº“è®¾è®¡)
5. [API æ¥å£å¥‘çº¦](#api-æ¥å£å¥‘çº¦)
6. [TDD å¼€å‘è®¡åˆ’](#tdd-å¼€å‘è®¡åˆ’)
7. [æµ‹è¯•ç­–ç•¥](#æµ‹è¯•ç­–ç•¥)
8. [éªŒæ”¶æ ‡å‡†](#éªŒæ”¶æ ‡å‡†)

---

## éœ€æ±‚æ¦‚è¿°

### 1.1 é¡¹ç›®èƒŒæ™¯

DB-Doctor å½“å‰çŠ¶æ€ï¼š
- âœ… æ ¸å¿ƒåŠŸèƒ½å®Œæ•´ï¼ˆç›‘å¬ã€åˆ†æã€é€šçŸ¥å…¨é“¾è·¯è·‘é€šï¼‰
- âœ… å¤š Agent åä½œæœºåˆ¶è¿è¡Œæ­£å¸¸
- âŒ é…ç½®æ–¹å¼åŸå§‹ï¼ˆéœ€æ‰‹åŠ¨ä¿®æ”¹ `application.yml` å¹¶é‡å¯ï¼‰
- âŒ ç¼ºå°‘å¯è§†åŒ–ç•Œé¢ï¼ˆç”¨æˆ·æ— æ³•ç›´è§‚çœ‹åˆ°æ…¢æŸ¥è¯¢åˆ†ææŠ¥å‘Šï¼‰
- âŒ è¿ç»´é—¨æ§›é«˜ï¼ˆéœ€è¦æŠ€æœ¯èƒŒæ™¯æ‰èƒ½æ“ä½œï¼‰

### 1.2 ç›®æ ‡

å°† DB-Doctor ä»"å¼€å‘è€…å·¥å…·"å‡çº§ä¸º"å¼€ç®±å³ç”¨äº§å“"ï¼š

| ç»´åº¦ | å½“å‰çŠ¶æ€ | ç›®æ ‡çŠ¶æ€ |
|------|---------|---------|
| é…ç½®æ–¹å¼ | ä¿®æ”¹ YAML æ–‡ä»¶ | Web ç•Œé¢é…ç½® |
| é…ç½®ç”Ÿæ•ˆ | éœ€è¦é‡å¯æœåŠ¡ | å³æ—¶ç”Ÿæ•ˆï¼ˆçƒ­é‡è½½ï¼‰ |
| æŠ¥å‘ŠæŸ¥çœ‹ | æŸ¥çœ‹æ•°æ®åº“æ—¥å¿— | Web å¯è§†åŒ–æŠ¥è¡¨ |
| ç”¨æˆ·é—¨æ§› | éœ€è¦å¼€å‘ç»éªŒ | é›¶ä»£ç æ“ä½œ |

### 1.3 æ ¸å¿ƒä»·å€¼

- **ä½é—¨æ§›**: DBA æ— éœ€æ‡‚ Javaï¼Œé€šè¿‡ç•Œé¢å³å¯å®Œæˆé…ç½®
- **å³æ—¶åé¦ˆ**: é…ç½®ä¿®æ”¹ç«‹å³ç”Ÿæ•ˆï¼Œæ— éœ€é‡å¯æœåŠ¡
- **å¯è§†åŒ–**: æ…¢æŸ¥è¯¢åˆ†ææŠ¥å‘Šå›¾è¡¨åŒ–å±•ç¤º
- **å®‰å…¨æ€§**: æ•æ„Ÿä¿¡æ¯ï¼ˆå¯†ç ã€API Keyï¼‰åŠ å¯†å­˜å‚¨

---

## æ ¸å¿ƒè®¾è®¡ç†å¿µ

### 2.1 é…ç½®å³æ•°æ® (Configuration as Data)

**å­˜å‚¨å±‚æ¬¡**:
```
ç¬¬ä¸€ä¼˜å…ˆçº§: H2 æ•°æ®åº“ (system_config è¡¨) â† ç”¨æˆ·ä¿®æ”¹çš„é…ç½®
ç¬¬äºŒä¼˜å…ˆçº§: application.yml (é»˜è®¤å€¼)    â† ä»…å½“æ•°æ®åº“ä¸ºç©ºæ—¶è¯»å–
ç¬¬ä¸‰ä¼˜å…ˆçº§: Java @Value é»˜è®¤å€¼          â† ç¡¬ç¼–ç å…œåº•
```

**å¯åŠ¨æµç¨‹**:
```java
@Service
public class ConfigBootstrapService {
    @PostConstruct
    public void init() {
        // 1. æ£€æŸ¥æ•°æ®åº“æ˜¯å¦æœ‰é…ç½®
        if (configRepo.isEmpty()) {
            // 2. ä» application.yml åŠ è½½é»˜è®¤å€¼å¹¶å…¥åº“
            loadDefaultsFromYamlAndSave();
        }
        // 3. åŠ è½½æ•°æ®åº“é…ç½®åˆ°å†…å­˜
        loadConfigToMemory();
    }
}
```

### 2.2 çƒ­é‡è½½ (Hot Reload)

**å®ç°ç­–ç•¥**:
- âœ… **ç®€å•çƒ­é‡è½½**: é…ç½®å¯¹è±¡ä½¿ç”¨ `AtomicReference`ï¼Œæ— éœ€é‡å»º Bean
- âš ï¸ **å¤æ‚çƒ­é‡è½½**ï¼ˆå¦‚ DataSourceï¼‰: ä½¿ç”¨ `@RefreshScope` æˆ–æ‰‹åŠ¨é‡å»ºè¿æ¥æ± 
- ğŸš« **ä¸æ”¯æŒçƒ­é‡è½½**: ç«¯å£å·ã€æ•°æ®æºç±»å‹ç­‰ï¼ˆéœ€è¦æç¤ºç”¨æˆ·é‡å¯ï¼‰

### 2.3 å‰åç«¯åˆ†ç¦»ä½†åŒåŒ…éƒ¨ç½²

**æ„å»ºæµç¨‹**:
```bash
# 1. å‰ç«¯æ„å»º
cd frontend && npm run build

# 2. å¤åˆ¶åˆ° Spring Boot é™æ€èµ„æºç›®å½•
cp -r dist/* ../src/main/resources/static/

# 3. Spring Boot æ‰“åŒ…
mvn clean package

# 4. è¿è¡Œï¼ˆè®¿é—® http://localhost:8080 å³å¯ï¼‰
java -jar target/db-doctor.jar
```

---

## åŠŸèƒ½æ¨¡å—è¯¦ç»†è®¾è®¡

### 3.1 ç›®æ ‡æ•°æ®åº“é…ç½® (Target DB)

**ç•Œé¢è®¾è®¡**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç›®æ ‡æ•°æ®åº“é…ç½®                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ•°æ®åº“ç±»å‹: [MySQL â–¼] (æœªæ¥æ”¯æŒ PostgreSQL)â”‚
â”‚  Host      : [____________]                  â”‚
â”‚  Port      : [3306    ]                      â”‚
â”‚  Username  : [root    ]                      â”‚
â”‚  Password  : [********] (åŠ å¯†æ˜¾ç¤º)          â”‚
â”‚  æµ‹è¯•æ•°æ®åº“: [test    ]                      â”‚
â”‚                                              â”‚
â”‚  [æµ‹è¯•è¿æ¥]  [ä¿å­˜å¹¶åº”ç”¨]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å­—æ®µè§„èŒƒ**:
| å­—æ®µ | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | æ ¡éªŒè§„åˆ™ |
|------|------|------|--------|---------|
| `db_type` | String | âœ… | `mysql` | æšä¸¾: `mysql`, `postgresql` |
| `db_host` | String | âœ… | `localhost` | IP æˆ–åŸŸå |
| `db_port` | Integer | âœ… | `3306` | 1-65535 |
| `db_username` | String | âœ… | `root` | éç©º |
| `db_password` | String | âœ… | - | åŠ å¯†å­˜å‚¨ |
| `test_database` | String | âŒ | - | ç”¨äºæµ‹è¯•è¿æ¥ |

**API**:
- `POST /api/config/test/db` - æµ‹è¯•è¿æ¥
- `POST /api/config/db` - ä¿å­˜å¹¶é‡å»ºæ•°æ®æº

---

### 3.2 AI å¤§è„‘é…ç½® (AI Brain) â­ æ ¸å¿ƒåŠŸèƒ½

**ç•Œé¢è®¾è®¡**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AI å¤§è„‘é…ç½®                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å¯ç”¨ AI è¯Šæ–­: [ON/OFF]                                        â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€ ä¸»æ²»åŒ»ç”Ÿ (Diagnosis Agent) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ æä¾›å•†: [Ollama â–¼] (OpenAI, DeepSeek, è‡ªå®šä¹‰)         â”‚   â”‚
â”‚  â”‚ Base URL: [http://localhost:11434           ]          â”‚   â”‚
â”‚  â”‚ Model Name: [qwen2.5:7b                     ]          â”‚   â”‚
â”‚  â”‚ Temperature: [0.0    ] (0.0 - 2.0)                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€ æ¨ç†ä¸“å®¶ (Reasoning Agent) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ æä¾›å•†: [DeepSeek â–¼]                                    â”‚   â”‚
â”‚  â”‚ Base URL: [https://api.deepseek.com         ]          â”‚   â”‚
â”‚  â”‚ Model Name: [deepseek-r1                   ]          â”‚   â”‚
â”‚  â”‚ API Key   : [sk-xxx**************************]          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€ ç¼–ç ä¸“å®¶ (Coding Agent) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ æä¾›å•†: [Ollama â–¼]                                     â”‚   â”‚
â”‚  â”‚ Model Name: [qwen2.5-coder:7b               ]          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                               â”‚
â”‚  [æµ‹è¯•æ‰€æœ‰æ¨¡å‹]  [ä¿å­˜å¹¶åº”ç”¨]                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ•°æ®ç»“æ„**:
```json
{
  "ai": {
    "enabled": true,
    "diagnosis": {
      "provider": "ollama",
      "baseUrl": "http://localhost:11434",
      "modelName": "qwen2.5:7b",
      "temperature": 0.0,
      "apiKey": ""
    },
    "reasoning": {
      "provider": "deepseek",
      "baseUrl": "https://api.deepseek.com",
      "modelName": "deepseek-r1",
      "temperature": 0.0,
      "apiKey": "sk-xxx"
    },
    "coding": {
      "provider": "ollama",
      "baseUrl": "http://localhost:11434",
      "modelName": "qwen2.5-coder:7b",
      "temperature": 0.0,
      "apiKey": ""
    }
  }
}
```

**API**:
- `GET /api/config/ai` - è·å– AI é…ç½®ï¼ˆè„±æ• API Keyï¼‰
- `POST /api/config/ai` - ä¿å­˜å¹¶é‡å»º AI Bean
- `POST /api/config/test/ai` - æµ‹è¯•å•ä¸ªæ¨¡å‹è¿é€šæ€§
- `POST /api/config/test/ai/all` - æ‰¹é‡æµ‹è¯•æ‰€æœ‰æ¨¡å‹

---

### 3.3 ç›‘æ§ä¸é€šçŸ¥ (Monitor & Notify)

**ç•Œé¢è®¾è®¡**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç›‘æ§ç­–ç•¥                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ…¢æŸ¥è¯¢é˜ˆå€¼ (ç§’): [2.0    ]                  â”‚
â”‚  é‡‡é›†æ‰¹æ¬¡å¤§å°:  [100    ]                    â”‚
â”‚  è½®è¯¢é—´éš”è‡ªé€‚åº”: [âœ“] (å¯ç”¨è‡ªåŠ¨è°ƒæ•´)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  é€šçŸ¥ç­–ç•¥                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  é€šçŸ¥æ¨¡å¼: (â€¢) å®šæœŸæ±‡æ€»  ( ) å®æ—¶å‘Šè­¦       â”‚
â”‚  æ±‡æ€»é—´éš”: [æ¯å°æ—¶ â–¼]                       â”‚
â”‚  ä¸¥é‡ç¨‹åº¦é˜ˆå€¼: [3.0] (1-10)                 â”‚
â”‚                                             â”‚
â”‚  æ¥æ”¶é‚®ç®±:                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ dba@example.com,dev-team@example.comâ”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                             â”‚
â”‚  SMTP é…ç½®:                                 â”‚
â”‚  Host: [smtp.qq.com      ]                 â”‚
â”‚  Port: [587             ]                  â”‚
â”‚  User: [noreply@qq.com  ]                  â”‚
â”‚  Pass: [************    ]                  â”‚
â”‚                                             â”‚
â”‚  [å‘é€æµ‹è¯•é‚®ä»¶]  [ä¿å­˜å¹¶åº”ç”¨]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å­—æ®µè§„èŒƒ**:
| å­—æ®µ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `slow_log_threshold` | Double | `2.0` | æ…¢æŸ¥è¯¢é˜ˆå€¼ï¼ˆç§’ï¼‰ |
| `batch_size` | Integer | `100` | æ¯æ¬¡é‡‡é›†æ‰¹æ¬¡å¤§å° |
| `adaptive_polling` | Boolean | `true` | è‡ªé€‚åº”è½®è¯¢ |
| `notify_mode` | String | `batch` | `batch` æˆ– `realtime` |
| `batch_interval_cron` | String | `0 0 * * * ?` | Cron è¡¨è¾¾å¼ |
| `severity_threshold` | Double | `3.0` | ä¸¥é‡ç¨‹åº¦é˜ˆå€¼ |
| `notify_emails` | String | - | é€—å·åˆ†éš” |
| `smtp_host` | String | `smtp.qq.com` | - |
| `smtp_port` | Integer | `587` | - |
| `smtp_username` | String | - | - |
| `smtp_password` | String | - | åŠ å¯†å­˜å‚¨ |

---

### 3.4 ç³»ç»Ÿç»´æŠ¤ (Maintenance)

**ç•Œé¢è®¾è®¡**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ•°æ®æ¸…ç†                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ¸…ç† [7] å¤©å‰çš„å†å²æ•°æ®                    â”‚
â”‚  [æ¸…ç†å†å²æ•°æ®]                              â”‚
â”‚                                             â”‚
â”‚  é‡ç½®ç³»ç»Ÿ (æ…ç”¨):                            â”‚
â”‚  [æ¸…ç©ºæ‰€æœ‰æŒ‡çº¹ä¸æ ·æœ¬]                        â”‚
â”‚                                             â”‚
â”‚  å…³äº DB-Doctor:                             â”‚
â”‚  å½“å‰ç‰ˆæœ¬: v2.2.0                            â”‚
â”‚  æ„å»ºæ—¶é—´: 2026-01-31 12:00:00              â”‚
â”‚  Git Commit: 9e580b1                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**API**:
- `POST /api/maintenance/cleanup-history` - æ¸…ç†å†å²æ•°æ®
- `POST /api/maintenance/reset-all` - é‡ç½®ç³»ç»Ÿï¼ˆå±é™©æ“ä½œï¼‰
- `GET /api/system/info` - è·å–ç³»ç»Ÿä¿¡æ¯

---

## æ•°æ®åº“è®¾è®¡

### 4.1 ç³»ç»Ÿé…ç½®è¡¨ (system_config)

```sql
CREATE TABLE system_config (
    config_key VARCHAR(100) PRIMARY KEY COMMENT 'é…ç½®é”® (å¦‚ ai.diagnosis.model-name)',
    config_value VARCHAR(1000) COMMENT 'é…ç½®å€¼',
    config_category VARCHAR(20) NOT NULL COMMENT 'é…ç½®åˆ†ç±»: DB, AI, NOTIFY, SYSTEM',
    is_sensitive BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦æ•æ„Ÿä¿¡æ¯ (å¯†ç /Key)',
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX idx_category (config_category)
) COMMENT 'ç³»ç»Ÿé…ç½®è¡¨';
```

**åˆå§‹æ•°æ®** (ä» application.yml è¿ç§»):
```sql
INSERT INTO system_config (config_key, config_value, config_category, is_sensitive) VALUES
-- ç›®æ ‡æ•°æ®åº“é…ç½®
('target.db.type', 'mysql', 'DB', FALSE),
('target.db.host', 'localhost', 'DB', FALSE),
('target.db.port', '3306', 'DB', FALSE),
('target.db.username', 'root', 'DB', FALSE),
('target.db.password', 'encrypted_password', 'DB', TRUE),

-- AI é…ç½®
('ai.enabled', 'true', 'AI', FALSE),
('ai.diagnosis.provider', 'ollama', 'AI', FALSE),
('ai.diagnosis.base-url', 'http://localhost:11434', 'AI', FALSE),
('ai.diagnosis.model-name', 'qwen2.5:7b', 'AI', FALSE),
('ai.diagnosis.temperature', '0.0', 'AI', FALSE),
('ai.diagnosis.api-key', '', 'AI', TRUE),

-- ç›‘æ§é…ç½®
('monitor.slow-log-threshold', '2.0', 'NOTIFY', FALSE),
('monitor.batch-size', '100', 'NOTIFY', FALSE),
('monitor.adaptive-polling', 'true', 'NOTIFY', FALSE),

-- é€šçŸ¥é…ç½®
('notify.mode', 'batch', 'NOTIFY', FALSE),
('notify.batch-interval-cron', '0 0 * * * ?', 'NOTIFY', FALSE),
('notify.severity-threshold', '3.0', 'NOTIFY', FALSE),
('notify.emails', 'dba@example.com', 'NOTIFY', FALSE),
('notify.smtp.host', 'smtp.qq.com', 'NOTIFY', FALSE),
('notify.smtp.port', '587', 'NOTIFY', FALSE),
('notify.smtp.username', 'noreply@qq.com', 'NOTIFY', FALSE),
('notify.smtp.password', 'encrypted_password', 'NOTIFY', TRUE);
```

### 4.2 æ…¢æŸ¥è¯¢æŠ¥è¡¨è§†å›¾ (slow_query_reports_view)

```sql
CREATE VIEW slow_query_reports_view AS
SELECT
    t.sql_fingerprint,
    t.db_name,
    t.table_name,
    t.occurrence_count,
    t.avg_query_time,
    t.avg_lock_time,
    t.max_rows_examined,
    t.analysis_status,
    t.ai_analysis_report,
    t.last_seen_time,
    CASE
        WHEN t.avg_query_time > 5.0 THEN 'ğŸ”´ ä¸¥é‡'
        WHEN t.avg_query_time > 3.0 THEN 'ğŸŸ  è­¦å‘Š'
        ELSE 'ğŸŸ¢ æ­£å¸¸'
    END as severity_level
FROM slow_query_template t
ORDER BY t.avg_query_time DESC;
```

---

## API æ¥å£å¥‘çº¦

### 5.1 é…ç½®ç®¡ç† API

#### GET /api/config/all
**è·å–æ‰€æœ‰é…ç½®ï¼ˆæ•æ„Ÿä¿¡æ¯è„±æ•ï¼‰**

```http
GET /api/config/all
```

**Response**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "targetDb": {
      "type": "mysql",
      "host": "localhost",
      "port": 3306,
      "username": "root",
      "password": "******"  // è„±æ•
    },
    "ai": {
      "enabled": true,
      "diagnosis": {
        "provider": "ollama",
        "baseUrl": "http://localhost:11434",
        "modelName": "qwen2.5:7b",
        "apiKey": "sk-******"  // è„±æ•
      }
    },
    "monitor": {
      "slowLogThreshold": 2.0,
      "batchSize": 100
    },
    "notify": {
      "mode": "batch",
      "emails": ["dba@example.com"]
    }
  }
}
```

#### POST /api/config/save
**ä¿å­˜é…ç½®å¹¶è§¦å‘çƒ­é‡è½½**

```http
POST /api/config/save
Content-Type: application/json

{
  "category": "AI",
  "configs": {
    "ai.diagnosis.model-name": "qwen2.5:14b",
    "ai.diagnosis.temperature": "0.1"
  }
}
```

**Response**:
```json
{
  "code": 200,
  "message": "é…ç½®ä¿å­˜æˆåŠŸï¼ŒAI æ¨¡å‹å·²é‡æ–°åŠ è½½",
  "data": {
    "refreshedBeans": ["diagnosisAgent", "reasoningAgent", "codingAgent"],
    "requiresRestart": false
  }
}
```

#### POST /api/config/test/db
**æµ‹è¯•æ•°æ®åº“è¿æ¥**

```http
POST /api/config/test/db
Content-Type: application/json

{
  "host": "localhost",
  "port": 3306,
  "username": "root",
  "password": "password",
  "database": "test"
}
```

**Response**:
```json
{
  "code": 200,
  "message": "è¿æ¥æˆåŠŸ",
  "data": {
    "success": true,
    "version": "8.0.35 MySQL Community Server",
    "latency": "15ms"
  }
}
```

#### POST /api/config/test/ai
**æµ‹è¯• AI æ¨¡å‹è¿é€šæ€§**

```http
POST /api/config/test/ai
Content-Type: application/json

{
  "agentType": "diagnosis",
  "provider": "ollama",
  "baseUrl": "http://localhost:11434",
  "modelName": "qwen2.5:7b"
}
```

**Response**:
```json
{
  "code": 200,
  "message": "æ¨¡å‹è¿æ¥æˆåŠŸ",
  "data": {
    "success": true,
    "responseTime": "1234ms",
    "testResult": "Hello! I am Qwen 2.5, ready to help."
  }
}
```

### 5.2 æŠ¥è¡¨æŸ¥è¯¢ API

#### GET /api/reports
**åˆ†é¡µæŸ¥è¯¢æ…¢æŸ¥è¯¢æŠ¥è¡¨**

```http
GET /api/reports?page=1&size=20&db=test&severity=warning
```

**Response**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "total": 156,
    "page": 1,
    "size": 20,
    "items": [
      {
        "fingerprint": "abc123...",
        "dbName": "test",
        "tableName": "users",
        "avgQueryTime": 5.23,
        "occurrenceCount": 42,
        "severityLevel": "ğŸ”´ ä¸¥é‡",
        "analysisStatus": "COMPLETED",
        "aiReport": "# æ…¢æŸ¥è¯¢æ™ºèƒ½è¯Šæ–­æŠ¥å‘Š\n...",
        "lastSeenTime": "2026-01-31 12:00:00"
      }
    ]
  }
}
```

#### GET /api/reports/{fingerprint}
**è·å–å•ä¸ªæ…¢æŸ¥è¯¢è¯¦ç»†æŠ¥å‘Š**

```http
GET /api/reports/abc123...
```

**Response**: åŒä¸Šï¼ŒåŒ…å«å®Œæ•´çš„ AI åˆ†ææŠ¥å‘Šã€‚

---

## TDD å¼€å‘è®¡åˆ’

### 6.1 å¼€å‘é¡ºåºï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰

**é˜¶æ®µ 1: åç«¯åŸºç¡€ (2-3 å¤©)**
1. âœ… åˆ›å»º `system_config` è¡¨
2. âœ… å®ç° `ConfigService` (å¢åˆ æ”¹æŸ¥ + çƒ­é‡è½½)
3. âœ… å®ç° `ConfigController` (REST API)
4. âœ… å•å…ƒæµ‹è¯• (è¦†ç›–ç‡ 80%+)
5. âœ… é›†æˆæµ‹è¯• (æµ‹è¯•çƒ­é‡è½½)

**é˜¶æ®µ 2: AI é…ç½®çƒ­é‡è½½ (1 å¤©)**
1. âœ… å®ç° `AiConfig.refreshBeans()`
2. âœ… æµ‹è¯•æ¨¡å‹åˆ‡æ¢ (Ollama â†’ DeepSeek)
3. âœ… æµ‹è¯• API Key æ›´æ–°

**é˜¶æ®µ 3: å‰ç«¯åŸºç¡€æ¡†æ¶ (1 å¤©)**
1. âœ… åˆå§‹åŒ– Vue 3 + Vite é¡¹ç›®
2. âœ… å®‰è£… Element Plus
3. âœ… åˆ›å»ºä¸»å¸ƒå±€ (Settings é¡µé¢)
4. âœ… å°è£… Axios è¯·æ±‚
5. âœ… å®ç°"AI é…ç½®" Tab é¡µ

**é˜¶æ®µ 4: å‰ç«¯åŠŸèƒ½å®Œå–„ (2 å¤©)**
1. âœ… å®ç°"ç›®æ ‡æ•°æ®åº“" Tab é¡µ
2. âœ… å®ç°"ç›‘æ§ä¸é€šçŸ¥" Tab é¡µ
3. âœ… å®ç°"ç³»ç»Ÿç»´æŠ¤" Tab é¡µ
4. âœ… è¡¨å•æ ¡éªŒä¸é”™è¯¯æç¤º
5. âœ… è”è°ƒæµ‹è¯•

**é˜¶æ®µ 5: æŠ¥è¡¨é¡µé¢ (å¯é€‰)**
1. âœ… å®ç°æ…¢æŸ¥è¯¢æŠ¥è¡¨åˆ—è¡¨
2. âœ… å®ç°æŠ¥å‘Šè¯¦æƒ…é¡µ
3. âœ… æ•°æ®å¯è§†åŒ–ï¼ˆECharts å›¾è¡¨ï¼‰

### 6.2 TDD å®æ–½æ­¥éª¤

ä»¥ `ConfigService` ä¸ºä¾‹ï¼š

#### æ­¥éª¤ 1: å®šä¹‰æ¥å£ (Interface)
```java
// src/main/java/com/dbdoctor/service/ConfigService.java
public interface ConfigService {
    String getConfig(String key);
    Map<String, String> getAllConfigs();
    void saveConfig(String key, String value);
    void saveAndRefresh(Map<String, String> configs);
}
```

#### æ­¥éª¤ 2: ç¼–å†™æµ‹è¯• (RED)
```java
// src/test/java/com/dbdoctor/service/ConfigServiceTest.java
@SpringBootTest
@TestMethodOrder(MethodOrderer.OrderAnnotation.class)
class ConfigServiceTest {

    @Autowired
    private ConfigService configService;

    @Test
    @Order(1)
    void shouldReturnDefaultValueWhenKeyNotExists() {
        String value = configService.getConfig("non.existent.key");
        assertNull(value);
    }

    @Test
    @Order(2)
    void shouldSaveAndRetrieveConfig() {
        configService.saveConfig("test.key", "test.value");
        String value = configService.getConfig("test.key");
        assertEquals("test.value", value);
    }

    @Test
    @Order(3)
    void shouldTriggerHotReloadWhenAiConfigChanged() {
        Map<String, String> configs = Map.of(
            "ai.diagnosis.model-name", "new-model"
        );

        configService.saveAndRefresh(configs);

        // éªŒè¯ Bean å·²åˆ·æ–°
        // TODO: æ·»åŠ æ–­è¨€
    }
}
```

#### æ­¥éª¤ 3: è¿è¡Œæµ‹è¯•ï¼ˆéªŒè¯å¤±è´¥ï¼‰
```bash
mvn test -Dtest=ConfigServiceTest

# é¢„æœŸç»“æœ: æµ‹è¯•å¤±è´¥ï¼ˆå› ä¸º ConfigService è¿˜æ²¡å®ç°ï¼‰
```

#### æ­¥éª¤ 4: å®ç°ä»£ç  (GREEN)
```java
// src/main/java/com/dbdoctor/service/ConfigServiceImpl.java
@Service
public class ConfigServiceImpl implements ConfigService {

    private final SystemConfigRepository configRepo;
    private final ApplicationContext applicationContext;

    @Override
    public String getConfig(String key) {
        return configRepo.findById(key)
            .map(SystemConfig::getConfigValue)
            .orElse(null);
    }

    @Override
    @Transactional
    public void saveAndRefresh(Map<String, String> configs) {
        // 1. ä¿å­˜åˆ°æ•°æ®åº“
        configs.forEach((key, value) -> {
            SystemConfig config = new SystemConfig();
            config.setConfigKey(key);
            config.setConfigValue(value);
            config.setConfigCategory(extractCategory(key));
            configRepo.save(config);
        });

        // 2. è§¦å‘çƒ­é‡è½½
        configs.keySet().forEach(this::reloadBeanIfNeeded);
    }

    private void reloadBeanIfNeeded(String key) {
        if (key.startsWith("ai.")) {
            // é‡æ–°åŠ è½½ AI Bean
            reloadAiBeans();
        }
        // TODO: å…¶ä»–çƒ­é‡è½½é€»è¾‘
    }
}
```

#### æ­¥éª¤ 5: è¿è¡Œæµ‹è¯•ï¼ˆéªŒè¯é€šè¿‡ï¼‰
```bash
mvn test -Dtest=ConfigServiceTest

# é¢„æœŸç»“æœ: æ‰€æœ‰æµ‹è¯•é€šè¿‡ âœ…
```

#### æ­¥éª¤ 6: é‡æ„ä»£ç  (IMPROVE)
- æå–é­”æ³•æ•°å­—ä¸ºå¸¸é‡
- ä¼˜åŒ–æ—¥å¿—è¾“å‡º
- æ·»åŠ è¾¹ç•Œæ£€æŸ¥

#### æ­¥éª¤ 7: éªŒè¯è¦†ç›–ç‡
```bash
mvn test jacoco:report

# é¢„æœŸç»“æœ: ConfigService è¦†ç›–ç‡ >= 80%
```

---

## æµ‹è¯•ç­–ç•¥

### 7.1 å•å…ƒæµ‹è¯• (åç«¯)

**è¦†ç›–èŒƒå›´**:
- `ConfigService`: é…ç½® CRUDã€çƒ­é‡è½½é€»è¾‘
- `ConfigController`: API è¯·æ±‚å“åº”
- `AiConfig`: AI Bean åˆ·æ–°é€»è¾‘
- å¯†ç åŠ å¯†/è§£å¯†å·¥å…·ç±»

**æµ‹è¯•æ¡†æ¶**: JUnit 5 + Mockito

**ç¤ºä¾‹**:
```java
@Test
void shouldMaskApiKeyWhenGettingConfig() {
    // Given: å­˜åœ¨æ•æ„Ÿé…ç½®
    configService.saveConfig("ai.diagnosis.api-key", "sk-secret123");

    // When: è·å–é…ç½®
    Map<String, String> configs = configService.getAllConfigs();

    // Then: API Key åº”è¢«è„±æ•
    String maskedKey = configs.get("ai.diagnosis.api-key");
    assertEquals("sk-***", maskedKey);
}
```

### 7.2 é›†æˆæµ‹è¯• (åç«¯)

**è¦†ç›–èŒƒå›´**:
- API ç«¯åˆ°ç«¯æµ‹è¯•ï¼ˆController â†’ Service â†’ Repositoryï¼‰
- çƒ­é‡è½½é›†æˆæµ‹è¯•ï¼ˆä¿®æ”¹é…ç½®åéªŒè¯ Bean å·²æ›´æ–°ï¼‰

**æµ‹è¯•æ¡†æ¶**: Spring Boot Test + TestContainers

**ç¤ºä¾‹**:
```java
@SpringBootTest(webEnvironment = RANDOM_PORT)
@AutoConfigureMockMvc
class ConfigControllerIntegrationTest {

    @Autowired
    private MockMvc mockMvc;

    @Test
    void shouldSaveConfigAndTriggerHotReload() throws Exception {
        String json = """
            {
              "category": "AI",
              "configs": {
                "ai.diagnosis.model-name": "new-model"
              }
            }
            """;

        mockMvc.perform(post("/api/config/save")
                .contentType(MediaType.APPLICATION_JSON)
                .content(json))
                .andExpect(status().isOk())
                .andExpect(jsonPath("$.data.refreshedBeans").isArray());

        // éªŒè¯ AI Bean å·²åˆ·æ–°
        // TODO: æ·»åŠ æ–­è¨€
    }
}
```

### 7.3 ç»„ä»¶æµ‹è¯• (å‰ç«¯)

**è¦†ç›–èŒƒå›´**:
- è¡¨å•ç»„ä»¶ï¼ˆè¾“å…¥æ ¡éªŒã€é”™è¯¯æç¤ºï¼‰
- API è°ƒç”¨å°è£…ï¼ˆæˆåŠŸ/å¤±è´¥å¤„ç†ï¼‰
- è·¯ç”±è·³è½¬

**æµ‹è¯•æ¡†æ¶**: Vitest + Vue Test Utils

**ç¤ºä¾‹**:
```typescript
// AiConfigForm.test.ts
describe('AiConfigForm', () => {
  it('should validate model name', () => {
    const wrapper = mount(AiConfigForm)

    wrapper.find('[data-test="model-name"]').setValue('')

    expect(wrapper.find('.error-message').text()).toBe('æ¨¡å‹åç§°ä¸èƒ½ä¸ºç©º')
  })

  it('should call save API when form submitted', async () => {
    const mockSave = vi.fn().mockResolvedValue({ code: 200 })
    const wrapper = mount(AiConfigForm, {
      global: {
        mocks: { $api: { saveConfig: mockSave } }
      }
    })

    await wrapper.find('[data-test="save-btn"]').trigger('click')

    expect(mockSave).toHaveBeenCalledWith({
      category: 'AI',
      configs: expect.any(Object)
    })
  })
})
```

### 7.4 E2E æµ‹è¯• (å¯é€‰)

**è¦†ç›–èŒƒå›´**:
- å®Œæ•´ç”¨æˆ·æµç¨‹ï¼ˆç™»å½• â†’ ä¿®æ”¹é…ç½® â†’ ä¿å­˜ â†’ éªŒè¯ç”Ÿæ•ˆï¼‰

**æµ‹è¯•æ¡†æ¶**: Playwright

**ç¤ºä¾‹**:
```typescript
test('should update AI model and refresh beans', async ({ page }) => {
  await page.goto('http://localhost:8080/#/settings/ai')

  // ä¿®æ”¹æ¨¡å‹åç§°
  await page.fill('[data-test="model-name"]', 'qwen2.5:14b')
  await page.click('[data-test="save-btn"]')

  // éªŒè¯æˆåŠŸæç¤º
  await expect(page.locator('.el-message--success')).toBeVisible()
})
```

---

## éªŒæ”¶æ ‡å‡†

### 8.1 åŠŸèƒ½éªŒæ”¶

**ç›®æ ‡æ•°æ®åº“é…ç½®**:
- âœ… èƒ½å¤Ÿè¿æ¥å¹¶æµ‹è¯• MySQL æ•°æ®åº“
- âœ… ä¿å­˜åç«‹å³ç”Ÿæ•ˆï¼ˆä¸‹æ¬¡æŸ¥è¯¢ä½¿ç”¨æ–°è¿æ¥ï¼‰
- âœ… å¯†ç åŠ å¯†å­˜å‚¨

**AI å¤§è„‘é…ç½®**:
- âœ… èƒ½å¤Ÿåˆ‡æ¢ 3 ä¸ª Agent çš„æ¨¡å‹
- âœ… èƒ½å¤Ÿä¿®æ”¹ API Key å¹¶ç«‹å³ç”Ÿæ•ˆ
- âœ… æµ‹è¯•è¿é€šæ€§åŠŸèƒ½æ­£å¸¸

**ç›‘æ§ä¸é€šçŸ¥**:
- âœ… èƒ½å¤Ÿä¿®æ”¹é˜ˆå€¼å’Œé€šçŸ¥é‚®ç®±
- âœ… èƒ½å¤Ÿå‘é€æµ‹è¯•é‚®ä»¶

**ç³»ç»Ÿç»´æŠ¤**:
- âœ… èƒ½å¤Ÿæ¸…ç†å†å²æ•°æ®
- âœ… é‡ç½®åŠŸèƒ½æœ‰äºŒæ¬¡ç¡®è®¤

### 8.2 æ€§èƒ½éªŒæ”¶

- âš¡ é…ç½®ä¿å­˜å“åº”æ—¶é—´ < 500ms
- âš¡ AI Bean åˆ·æ–°æ—¶é—´ < 2s
- âš¡ é¡µé¢åŠ è½½æ—¶é—´ < 1s

### 8.3 å®‰å…¨éªŒæ”¶

- ğŸ”’ æ•æ„Ÿä¿¡æ¯ï¼ˆå¯†ç ã€API Keyï¼‰åŠ å¯†å­˜å‚¨
- ğŸ”’ API è¿”å›çš„æ•æ„Ÿä¿¡æ¯è„±æ•
- ğŸ”’ å‰ç«¯ä¼ è¾“ä½¿ç”¨ HTTPSï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

### 8.4 å…¼å®¹æ€§éªŒæ”¶

- ğŸŒ Chrome 90+
- ğŸŒ Firefox 88+
- ğŸŒ Safari 14+

---

## é™„å½•

### A. ç›®å½•ç»“æ„

```
DB-Doctor/
â”œâ”€â”€ frontend/                    # å‰ç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/                # API å°è£…
â”‚   â”‚   â”œâ”€â”€ components/         # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ views/              # é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ Settings/       # è®¾ç½®ä¸­å¿ƒ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ TargetDb.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AiConfig.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MonitorNotify.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Maintenance.vue
â”‚   â”‚   â”‚   â””â”€â”€ Reports/        # æŠ¥è¡¨é¡µé¢
â”‚   â”‚   â”œâ”€â”€ router/             # è·¯ç”±
â”‚   â”‚   â””â”€â”€ stores/             # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.ts
â”œâ”€â”€ src/main/
â”‚   â”œâ”€â”€ java/com/dbdoctor/
â”‚   â”‚   â”œâ”€â”€ config/             # é…ç½®ç±»
â”‚   â”‚   â”‚   â””â”€â”€ AiConfig.java   # æ·»åŠ  refreshBeans() æ–¹æ³•
â”‚   â”‚   â”œâ”€â”€ controller/         # æ–°å¢
â”‚   â”‚   â”‚   â””â”€â”€ ConfigController.java
â”‚   â”‚   â”œâ”€â”€ service/            # æ–°å¢
â”‚   â”‚   â”‚   â”œâ”€â”€ ConfigService.java
â”‚   â”‚   â”‚   â””â”€â”€ ConfigServiceImpl.java
â”‚   â”‚   â””â”€â”€ entity/             # æ–°å¢
â”‚   â”‚       â””â”€â”€ SystemConfig.java
â”‚   â””â”€â”€ resources/
â”‚       â”œâ”€â”€ db/migration/       # æ–°å¢
â”‚       â”‚   â””â”€â”€ V2__create_system_config_table.sql
â”‚       â””â”€â”€ static/             # å‰ç«¯æ„å»ºäº§ç‰©
â””â”€â”€ todo/
    â””â”€â”€ 8_å‰ç«¯ç®¡ç†ç³»ç»Ÿå¼€å‘.md    # æœ¬æ–‡æ¡£
```

### B. å‚è€ƒæ–‡æ¡£

- [Spring Boot çƒ­é‡è½½æœ€ä½³å®è·µ](https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config)
- [Element Plus å®˜æ–¹æ–‡æ¡£](https://element-plus.org/)
- [Vite å®˜æ–¹æ–‡æ¡£](https://vitejs.dev/)
- [LangChain4j æ–‡æ¡£](https://docs.langchain4j.dev/)

### C. å¼€å‘æ£€æŸ¥æ¸…å•

**åç«¯å¼€å‘**:
- [ ] åˆ›å»º `system_config` è¡¨
- [ ] å®ç° `SystemConfig` å®ä½“ç±»
- [ ] å®ç° `SystemConfigRepository`
- [ ] å®ç° `ConfigService`
- [ ] å®ç° `ConfigController`
- [ ] å®ç° `AiConfig.refreshBeans()`
- [ ] å•å…ƒæµ‹è¯• (è¦†ç›–ç‡ 80%+)
- [ ] é›†æˆæµ‹è¯•

**å‰ç«¯å¼€å‘**:
- [ ] åˆå§‹åŒ– Vue 3 é¡¹ç›®
- [ ] å®‰è£… Element Plus
- [ ] åˆ›å»ºä¸»å¸ƒå±€
- [ ] å®ç°"AI é…ç½®"é¡µé¢
- [ ] å®ç°"ç›®æ ‡æ•°æ®åº“"é¡µé¢
- [ ] å®ç°"ç›‘æ§ä¸é€šçŸ¥"é¡µé¢
- [ ] å®ç°"ç³»ç»Ÿç»´æŠ¤"é¡µé¢
- [ ] ç»„ä»¶æµ‹è¯•
- [ ] æ„å»ºå¹¶é›†æˆåˆ° Spring Boot

**è”è°ƒæµ‹è¯•**:
- [ ] å‰ç«¯ä¿å­˜é…ç½® â†’ åç«¯çƒ­é‡è½½ç”Ÿæ•ˆ
- [ ] AI æ¨¡å‹åˆ‡æ¢éªŒè¯
- [ ] æ•°æ®åº“è¿æ¥æµ‹è¯•
- [ ] é‚®ä»¶å‘é€æµ‹è¯•

---

**æ–‡æ¡£ç”Ÿæˆæ—¶é—´**: 2026-01-31
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**è´Ÿè´£äºº**: DB-Doctor å¼€å‘å›¢é˜Ÿ
